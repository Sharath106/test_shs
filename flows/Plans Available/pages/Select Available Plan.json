{
  "name": "49b9885e-8a45-4c9e-8b1f-c613931440b3",
  "displayName": "Select Available Plan",
  "form": {
  
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Select Available Plan"
    }, {
      "parameter": "is_available_plan_selected",
      "value": null
    }, {
      "parameter": "selected_plan",
      "value": null
    }, {
      "parameter": "is_filtered_plan_selected",
      "value": null
    } ],
    "advancedSettings": {
      "playbackInterruptionSettings": {
      
      }
    }
  },
  "transitionRoutes": [ {
    "intent": "small_talk.i_dont_know",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Souhaitez-vous qu'un membre de l'équipe vous assiste?", "Aimeriez-vous le soutien d'un membre de l'équipe?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Would you like a team member to assist you?", "Would you like support from a team member?" ]
        },
        "languageCode": "en"
      } ]
    },
    "targetPage": "Agent Handoff Redirect",
    "name": "bf5473d5-f2b1-4529-887a-92fa024966f4"
  }, {
    "intent": "small_talk.let_me_think",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Aucun problème. Veuillez prendre votre temps.", "Pas de problème. Vous pouvez me donner votre réponse quand vous l'aurez." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "No problem! Please take your time.", "No worries! You can answer whenever you're ready." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "last_intent",
        "value": "let me think"
      } ]
    },
    "name": "5bc4bb5b-f2dc-4300-a80f-28a0c07a43df"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "J'ai compris.", "D'accord.", "OK. " ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Got it.", "Alright.", "Ok." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "is_numbered_plan_displayed",
        "value": null
      } ]
    },
    "targetPage": "Check Another Plan",
    "name": "116765db-449d-41e4-b4d8-215ab7e3b128"
  }, {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "is_available_plan_selected",
        "value": "true"
      }, {
        "parameter": "selected_plan",
        "value": "\"$sys.func.CONCATENATE(\"Plan selected \", \"$session.params.plan_showed_counter\")\""
      }, {
        "parameter": "plan_showed_index",
        "value": "$sys.func.TO_NUMBER($sys.func.MINUS($session.params.plan_showed_counter, 1))"
      }, {
        "parameter": "is_numbered_plan_displayed",
        "value": null
      } ]
    },
    "targetPage": "_RPC Plan and Add Ons",
    "name": "d7f349d4-9f20-4825-af37-d564ddb4e056",
    "description": "new route bypassing Process Selected Plan page"
  }, {
    "intent": "supplemental.select_specified_plan",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "is_numbered_plan_displayed",
        "value": true
      } ]
    },
    "targetPage": "Select Specified Plan",
    "name": "b6c36123-9143-4f9f-95c9-3acfc57b6fca"
  }, {
    "intent": "supplemental.choose_another_plan",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord.", "Absolument.", "Parfait." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Sure!", "Absolutely!", "Definitely!" ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "is_filters_reset",
        "value": "true"
      } ]
    },
    "targetPage": "Check If Multiple Filters",
    "name": "7a68aca1-0508-440c-81e8-1381d5fc7727"
  }, {
    "condition": "($session.params.count_available_plans = 0 OR $session.params.count_available_plans = null) AND $session.params.is_available_plan_selected = null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Nous n'avons pas de forfait disponible pour vous présentement.", "Aucun forfait n'est actuellement disponible pour vous." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Laissez-moi vous mettre en communication avec un membre de l'équipe afin de vous assister.", "Permettez-moi de vous mettre en communication avec un agent qui pourra vous aider." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "We don't currently have rate plan options for you.", "No rate plan options are currently available to you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I will have to get a team member to assist you.", "I will need to transfer you to a team member to help you." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetPage": "Agent Handoff Redirect",
    "name": "c8806e17-eaad-40c1-b479-be627c094414"
  }, {
    "condition": "$session.params.plan_showed_counter \u003e= $session.params.count_available_plans",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Nous n'avons actuellement pas d'autres options de forfait disponibles pour vous." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Je vais devoir vous transférer à un membre de l'équipe pour vous aider.", "Je devrai vous transférer vers un membre de l’équipe pour vous assister." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "We don't currently have more rate plan options available for you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I will have to get a team member to assist you.", "I will need to transfer you to a team member to help you." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetPage": "Agent Handoff Redirect",
    "name": "211352e2-72dd-4389-9a9b-1555a14d65f5",
    "description": "When count_available_plans counter is less than plan_showed_counter, means all the available plans are informed to the customer"
  }, {
    "condition": "$session.params.plan_showed_counter = 0 OR $session.params.plan_showed_counter = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "plan_showed_counter",
        "value": 0
      } ]
    },
    "name": "3072b7ea-1ee2-412a-a505-2d23d9dc6ef1"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "selected_plan_details",
        "value": "$sys.func.GET($session.params.available_plans_list, $session.params.plan_showed_counter)"
      }, {
        "parameter": "selected_plan_name_split",
        "value": "$sys.func.SPLIT($session.params.selected_plan_details.serviceDescription, \"-\")"
      }, {
        "parameter": "selected_plan_name",
        "value": "$session.params.selected_plan_name_split[0]"
      } ]
    },
    "name": "9dafae42-18b6-40ef-b72d-6b46d4be1997"
  }, {
    "condition": "$session.params.is_numbered_plan_displayed != true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "plan_type_sequence",
        "value": "$sys.func.APPEND($session.params.plan_type_sequence, \"a\")"
      }, {
        "parameter": "plan_number_sequence",
        "value": "$sys.func.APPEND($session.params.plan_number_sequence, $session.params.plan_showed_counter)"
      } ]
    },
    "name": "e8a6bd1f-9791-44e2-b455-f660b82f164a"
  }, {
    "condition": "$session.params.last_intent != \"let me think\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Voici le plan tarifaire disponible." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "\u003cspeak\u003e\u003cprosody rate=\"95%\"\u003e$request.generative.generated_ava_fil_plan_description pour \u003csay-as interpret-as=\"currency\" language='fr-CA'\u003e$$session.params.selected_plan_details.chargeAmount\u003c/say-as\u003e par mois.\u003c/prosody\u003e\u003c/speak\u003e" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Here is the available rate plan." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "\u003cspeak\u003e\u003cprosody rate=\"85%\"\u003e$request.generative.generated_ava_fil_plan_description for \u003csay-as interpret-as=\"currency\" language='en-US'\u003e$$session.params.selected_plan_details.chargeAmount\u003c/say-as\u003e per month.\u003c/prosody\u003e\u003c/speak\u003e" ]
        },
        "languageCode": "en"
      } ],
      "generators": [ {
        "generator": "projects/cdo-ccai-lab-f7edc3/locations/northamerica-northeast1/agents/0a9ec792-2a11-4b74-bcd9-9d10c2051cd2/generators/69091487-0a08-4e4e-abff-9b762f5727f6",
        "inputParameters": [ {
          "key": "selected_plan_name",
          "value": "$session.params.selected_plan_name"
        }, {
          "key": "serviceDescription",
          "value": "$session.params.selected_plan_details.serviceDescription"
        } ],
        "outputParameter": "$request.generative.generated_ava_fil_plan_description"
      } ]
    },
    "name": "727b442e-ee19-47d0-8604-3a7ea9f5e484"
  }, {
    "condition": "$session.params.count_available_plans \u003e= $session.params.plan_showed_counter",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "plan_showed_counter",
        "value": "$sys.func.ADD($session.params.plan_showed_counter, 1)"
      } ]
    },
    "name": "5ff36d11-7936-4547-8f8c-70b8b7d6a8eb",
    "description": "Display plans to the customer till the count_available_plans is more or equal to the plan_showed_counter."
  } ],
  "transitionRouteGroups": [ "FAQs" ]
}
