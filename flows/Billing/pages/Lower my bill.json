{
  "name": "67b5d6f9-28da-43f0-af07-b46281b16337",
  "displayName": "Lower my bill",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_lower_my_bill",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send a text message with more information about our available rate plans?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations sur nos forfaits disponibles?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about our available rate plans?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations sur nos forfaits disponibles?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "87a5d43f-d50d-40b3-9571-77c2f0d33ae5"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "a5d517fc-42da-4ee2-b7c5-c015710b6125"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "4f3459fc-d679-41b2-ba33-d918907271cd"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about our available rate plans?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations sur nos forfaits disponibles?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "bfb3904f-7e6e-4b3e-8e70-90cbf70204f3"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "e39e755c-1fd6-4ff3-83e8-bb1d81f2e293"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "afafa231-a40d-4931-9b34-83af7b45f434"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Lower my bill"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "available rate plans for you"
    }, {
      "parameter": "page_summaryfr",
      "value": "les forfaits tarifaires disponibles pour vous"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    }, {
      "parameter": "dtmf_lower_my_bill",
      "value": "9"
    }, {
      "parameter": "last_page_summary",
      "value": "finding options for a lower bill"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "trouver des options pour une facture moins élevée"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\") AND $session.params.app_first_poc = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "To find options to lower your bill, you must use your My TELUS account to get the fastest resolution. It's easy to use and allows you to avoid waiting on the line." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "An agent may not be able to complete this on a customer behalf." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To help you find information on different rate plans, I am sending you a link to My TELUS now." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you still need help, you can request a priority call back from the virtual assistant in your My TELUS account." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour trouver des options pour réduire votre facture, vous devez utiliser votre compte Mon TELUS pour obtenir la résolution la plus rapide. Il est simple à utiliser et vous permet d'éviter d'attendre en ligne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Un agent peut ne pas être en mesure d'aider à faire ça au nom d'un client." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour vous aider à trouver de l'information sur nos différents forfaits, Je vous envoie maintenant un lien vers Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez encore besoin d'aide, vous pouvez demander un rappel prioritaire à l'assistant virtuel dans votre compte Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "You definitely have the option to lower your bill by exploring different rate plan options." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Note that, if you're currently under contract, you may have a minimum required for your price plan. Going below this amount can result in charges." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Vous pourriez certainement réduire le montant de votre facture en parcourant les différents forfaits que nous offrons." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous êtes actuellement sous contrat, vous pouvez avoir un minimum requis pour votre forfait. Passer en dessous de ce montant peut entraîner des frais." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319008J"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN7319003Y"
      }, {
        "parameter": "lowermybill_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_lower_my_bill",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "69aea07b-4ef3-40e2-a573-319ea0ee8bbc"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "lowermybill_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_lower_my_bill",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319008J"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN7319003Y"
      } ]
    },
    "targetPage": "End Page",
    "name": "526891ef-e305-45be-b26e-2924b1452eb4"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "lowermybill_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_lower_my_bill",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN7319003Y"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319008J"
      } ]
    },
    "targetPage": "End Page",
    "name": "892f73cc-6bab-43e4-a083-dc7fada2735f"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "lowermybill_retrycnt",
        "value": null
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319008J"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN7319003Y"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "ddb28713-3cbf-45e7-b848-3a163b08431f"
  }, {
    "condition": "$session.params.dtmf_lower_my_bill = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay let me get someone to help you" ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "lowermybill_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_lower_my_bill",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "aeca6415-a400-47c4-b0f8-d50b0966445c"
  }, {
    "condition": "$session.params.dtmf_lower_my_bill = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319008J"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN7319003Y"
      }, {
        "parameter": "lowermybill_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_lower_my_bill",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "91ee44a4-bad7-46aa-bb2f-a9d71fb10db1"
  }, {
    "condition": "$session.params.dtmf_lower_my_bill = 1 OR $session.params.dtmf_lower_my_bill = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_lower_my_bill",
        "value": null
      }, {
        "parameter": "lowermybill_retrycnt",
        "value": "$sys.func.ADD($session.params.lowermybill_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "b3ccca9f-4008-4d59-b9e1-f44cb9854e83"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "lowermybill_retrycnt",
        "value": "$sys.func.ADD($session.params.lowermybill_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.lowermybill_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.lowermybill_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "996ab1c9-3ef9-4479-bd37-b2a01d9e798d"
  } ]
}
