{
  "name": "a11026b7-19eb-4fff-b0fb-949cfeed5baf",
  "displayName": "Text records",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_text_records",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je ne comprends pas.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un texto expliquant comment procéder?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text on how to do that ?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "004a1eab-d0ae-4d70-98d7-26650528e147"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "522dfec0-5f10-4730-9c8f-1d7c00f60bb1"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "d85e18c6-df3e-476f-a983-c824bbad28cc"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je ne comprends pas.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un texto expliquant comment procéder?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text on how to do that ?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "80cc48d5-ef91-48a3-9743-fa8a1ec1205c"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "fda49369-704d-4846-bf42-cc665e87454c"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "b3c840a8-93b3-45f9-a406-2c48e4fe4fcc"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Text records"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "how to view your text records"
    }, {
      "parameter": "page_summaryfr",
      "value": "la façon de consulter vos enregistrements de messages texte"
    }, {
      "parameter": "last_page_summary",
      "value": "viewing your text records"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "consulter votre historique de message texte"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\") AND $session.params.app_first_poc = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "TELUS ne conserve pas de registre du contenu de tout message texte à des fins de confidentialité." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour de l'information sur l'historique de vos messages texte, vous devez utiliser votre compte Mon TELUS pour obtenir la résolution la plus rapide. Il est simple à utiliser et vous permet d'éviter d'attendre en ligne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Un agent peut ne pas être en mesure d'aider à faire ça au nom d'un client, Je vous envoie maintenant un lien vers Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez encore besoin d'aide, vous pouvez demander un rappel prioritaire à l'assistant virtuel dans votre compte Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "TELUS does not keep a record of the content of any text messages for privacy purposes." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To get your texting records which only include phone numbers and timestamps of messages, you must use your My TELUS account, It's easy to use and allows you to avoid waiting on the line." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "An agent cannot help perform this on a customers behalf, I am sending you a link to My TELUS now." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you still need help, you can request a priority call back from the virtual assistant in your My TELUS account." ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Pour des raisons de confidentialité, TELUS ne conserve pas le contenu des messages texte. Vous pouvez consulter vous-même l'historique de vos messages texte en accédant à l'application Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "TELUS does not keep a record of the content of any text messages for privacy purposes. You can view your text message history yourself by going on the My TELUS app." ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "textrecords_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_text_records",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetPage": "Text records online or app",
    "name": "c24b643e-cb2f-435d-9c28-7dce5725328c"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "textrecords_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_text_records",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900S5"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QX"
      }, {
        "parameter": "sms_flow_option",
        "value": "app"
      } ]
    },
    "targetPage": "End Page",
    "name": "e600ac26-5ab8-4076-9696-959e31dd08b0"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "textrecords_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_text_records",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QX"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900S5"
      }, {
        "parameter": "sms_flow_option",
        "value": "app"
      } ]
    },
    "targetPage": "End Page",
    "name": "27277543-3043-4d7a-85d9-7591cc337727"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "textrecords_retrycnt",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetPage": "Text records online or app",
    "name": "23629ab4-dc7b-4370-b298-b09d5ec2654c"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900S5"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QX"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "sms_flow_option",
        "value": "app"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "834ab289-45b8-45ab-b2f5-0c5917472680"
  }, {
    "condition": "$session.params.dtmf_text_records = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Alright, let's get someone to help you." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "textrecords_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_text_records",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "19c7212d-4c09-46dc-986d-dfb74435d4d0"
  }, {
    "condition": "$session.params.dtmf_text_records = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "textrecords_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_text_records",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetPage": "Text records online or app",
    "name": "0c7bd8aa-dee4-497c-8634-27eb71074170"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "textrecords_retrycnt",
        "value": "$sys.func.ADD($session.params.textrecords_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.textrecords_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$session.params.textrecords_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "name": "71cb45f5-954a-4b0a-bb5a-ee70ec2ca762"
  } ]
}
