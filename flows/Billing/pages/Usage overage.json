{
  "name": "9e8dcad6-e2a6-4f71-b519-0727ff7c924c",
  "displayName": "Usage overage",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_usage_overage",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send a text message with more information about pay-per-use rates to your phone?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ " Aimeriez-vous que j'envoie un message texte avec plus d'informations sur les frais payables à l'utilisation?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about pay-per-use rates to your phone?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations sur les frais payables à l'utilisation?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "2e53ba63-79a6-41cf-a9f6-7451006c78d7"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "804c7ad0-e698-42d1-9ac0-b6642b795960"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "b70a4175-9e68-4744-80a4-aefe96cbda37"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about pay-per-use rates to your phone?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations sur les frais payables à l'utilisation?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "54af2af5-c6b0-4597-8612-311d5ad3e1c2"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "591b38e4-5507-4a8b-8585-6c7261f33d4a"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "15a30a1c-5ce3-4d22-8688-6c31ce90cc3f"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Usage overage"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "pay per use rates"
    }, {
      "parameter": "page_summaryfr",
      "value": "les tarifs à l'utilisation"
    }, {
      "parameter": "last_page_summary",
      "value": "understanding pay per use rates"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "comprendre les tarifs à l'utilisation"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\") AND $session.params.app_first_poc = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "To get information on pay per use, you must use the TELUS website for the fastest resolution. It's easy to use and allows you to avoid waiting on the line." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "I am sending you a link to the website now." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you still need help, you can request a priority call back from the virtual assistant in your My TELUS account." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour de l'information sur les tarifs à l'utilisation, vous devez utiliser votre compte Mon TELUS pour obtenir la résolution la plus rapide. Il est simple à utiliser et vous permet d'éviter d'attendre en ligne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Je vous envoie maintenant un lien vers le site Web." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez encore besoin d'aide, vous pouvez demander un rappel prioritaire à l'assistant virtuel dans votre compte Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "You may incur overedge charges if you go over the allotted data, or airtime in your plan. This also applies to international, long distance, or roaming usage. Overedge charges may vary if you have an expired plan. When roaming outside of Canada without any travel option, pay-per-use rates will apply." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Vous pouvez encourir des frais de dépassement si vous dépassez la quantité de données ou de temps d'antenne allouée dans votre forfait. Cela s'applique également à l'utilisation internationale, à l'interurbain ou à l'itinérance. Les frais de dépassement peuvent varier si votre forfait a expiré. En cas d'itinérance en dehors du Canada sans option de voyage, des tarifs à l'utilisation seront appliqués." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900P8"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QF"
      }, {
        "parameter": "usageoverage_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_usage_overage",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "4a61997f-0eb0-434d-b701-36528dbf6b4a"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usageoverage_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_usage_overage",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900P8"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QF"
      } ]
    },
    "targetPage": "End Page",
    "name": "a652836e-9282-4161-a58d-fe4d06350c2f"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usageoverage_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_usage_overage",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QF"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900P8"
      } ]
    },
    "targetPage": "End Page",
    "name": "4a8846bf-a49c-4dfd-b299-a5969930c269"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usageoverage_retrycnt",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900P8"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QF"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "7205b4a4-e767-4e1c-868e-136aa75f9c1b"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900P8"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900QF"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "2f801583-fd78-4768-bd00-f417432f1286"
  }, {
    "condition": "$session.params.dtmf_usage_overage = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "usageoverage_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_usage_overage",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "4edbceb3-1ff6-4701-8b31-a75274ebb820"
  }, {
    "condition": "$session.params.dtmf_usage_overage = 1 OR $session.params.dtmf_usage_overage = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_usage_overage",
        "value": null
      }, {
        "parameter": "usageoverage_retrycnt",
        "value": "$sys.func.ADD($session.params.usageoverage_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "85c856d0-60e0-4c33-8a78-66aa7e6ff203"
  } ]
}
