{
  "name": "d1f471ce-dc15-4e98-b8ec-3a38237599bf",
  "displayName": "Bill dispute",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_bill_dispute",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "would you like to review your bill details with me?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous revoir les détails de votre facture avec moi?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "9b09ed97-2d1c-4efc-9706-bd4f641a47bb"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To review your bill, say yes or press 1, team member or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour consulter votre facture, dites oui ou faites le 1. Pour un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "0b572c35-2136-4bd3-9a84-afb6e037c09e"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "fe284fc4-846a-4957-a191-a8eed08e07f3"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "would you like to review your bill details with me?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous revoir les détails de votre facture avec moi?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "5df62190-26c0-4295-a5f0-e974b2e53283"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To review your bill, say yes or press 1, team member or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour consulter votre facture, dites oui ou faites le 1. Pour un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "d22d3a2f-b537-49a7-9083-d598e4e39664"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "063c52e0-a57a-48c5-800f-82bfcc07a24f"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Bill dispute"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.bill_reviewed = \"true\"",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "If you've noticed an error, or, charge on your bill and you would like to dispute it. Let me get you to a team member to review the charge." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous remarquez une erreur et souhaitez contester des frais erronés sur votre facture, je peux vous rediriger vers un membre de l'équipe afin d'examiner la charge." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "($session.params.billdispute_retrycnt = null OR $session.params.billdispute_retrycnt = 0) AND $session.params.bill_reviewed != \"true\"",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "If you've noticed an error, or, charge on your bill and you would like to dispute it. Let me get you to a team member to review the charge." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Before I do so, would you like to review your bill details with me?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous remarquez une erreur et souhaitez contester des frais erronés sur votre facture, je peux vous rediriger vers un membre de l'équipe afin d'examiner la charge." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Avant que je vous transfère, souhaitez-vous revoir les détails de votre facture avec moi?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.billdispute_retrycnt = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "would you like to review your bill details with me?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Souhaitez-vous revoir les détails de votre facture avec moi?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.billdispute_retrycnt = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "To review your bill, say yes or press 1, team member or press 0." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour consulter votre facture, dites oui ou faites le 1. Pour un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_bill_dispute",
        "value": null
      } ]
    },
    "targetPage": "Bill and balance",
    "name": "0bc15f22-066c-4f2d-b13a-0ef3712089d4"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Hmm. Let me get you to a team member for further assistance." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Pas de problème, laissez-moi vous chercher un membre de l'équipe alors." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_bill_dispute",
        "value": null
      } ]
    },
    "targetPage": "Ask for Agent Billing",
    "name": "b919fa10-b402-41d5-9334-8972ea7466a2"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_bill_dispute",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "e8d8e1e6-6810-4556-8b12-c931753ff603"
  }, {
    "condition": "$session.params.bill_reviewed = \"true\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_bill_dispute",
        "value": null
      } ]
    },
    "targetPage": "Ask for Agent Billing",
    "name": "f82b6306-1269-4cc6-8a77-344b782c9092"
  }, {
    "condition": "$session.params.dtmf_bill_dispute = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Alright, let's get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_bill_dispute",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "505dec36-2e2f-48e0-adf6-9db26c10de94"
  }, {
    "condition": "$session.params.dtmf_bill_dispute = \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_bill_dispute",
        "value": null
      } ]
    },
    "targetPage": "Bill and balance",
    "name": "2359e799-662b-4eff-b89f-15ac75f25f24"
  }, {
    "condition": "$session.params.billdispute_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": 0
      } ]
    },
    "name": "b44bb5ae-91f9-4226-879b-ea7c478aab2e"
  }, {
    "condition": "$session.params.billdispute_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "e1586b5e-fed3-44d0-97c4-5c101ab97081"
  }, {
    "condition": "$session.params.dtmf_bill_dispute = 1 OR $session.params.dtmf_bill_dispute = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Je ne crois pas avoir bien saisi.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_bill_dispute",
        "value": null
      }, {
        "parameter": "billdispute_retrycnt",
        "value": "$sys.func.ADD($session.params.billdispute_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "9084b524-654a-4ae8-b4e4-9ad6c10c2e9d"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "billdispute_retrycnt",
        "value": "$sys.func.ADD($session.params.billdispute_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.billdispute_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.billdispute_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "cff527d1-6a2a-492e-b633-39eb9e1cfc98"
  } ],
  "transitionRouteGroups": [ "billing_supp_routes" ]
}
