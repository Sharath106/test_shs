{
  "name": "df2d356a-3291-4ad9-8196-e1f809672465",
  "displayName": "Usage",
  "form": {
    "parameters": [ {
      "displayName": "phone_or_online",
      "required": true,
      "entityType": "@phone-or-online",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn't understand that", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "To continue over the phone, say or press 1. To receive a text message, say or press 9, for a team member to help you, say or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous continuer et obtenir de l'aide par téléphone, ou recevoir des instructions sur la façon de consulter vous-même votre consommation de données?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "452a19fd-adba-470d-afaa-2509af37193a"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To continue over the phone, say phone or press 1, for a text message, say receive a text or press 2. For a team member to help you, say team member or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour continuer par téléphone, dites téléphone ou faites le 1. Pour recevoir un message texte, dites message texte ou faites le 9. Pour un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "8ebe88fa-9bcf-4f47-98b8-16dc2dc74adf"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "b4edb338-cb27-413d-b9a0-bd58df28b9a7"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn't understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "To continue over the phone, say or press 1. To receive a text message, say or press 9, for a team member to help you, say or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous continuer et obtenir de l'aide par téléphone, ou recevoir des instructions sur la façon de consulter vous-même votre consommation de données?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "8913f095-bd5c-49a2-86bc-71f09975de51"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To continue over the phone, say phone or press 1, for a text message, say receive a text or press 2. For a team member to help you, say team member or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour continuer par téléphone, dites téléphone ou faites le 1. Pour recevoir un message texte, dites message texte ou faites le 9. Pour un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "053b40f5-510b-49d3-969d-c0fccd032816"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "50965e28-903e-4664-87cd-c81e464d6d52"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "messages": [ {
      "text": {
        "text": [ "I can help you get more details on your usage." ]
      },
      "languageCode": "en"
    }, {
      "text": {
        "text": [ "Je peux vous aider à obtenir plus de détails sur votre utilisation." ]
      },
      "languageCode": "fr-ca"
    } ],
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Usage"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    }, {
      "parameter": "page_summary",
      "value": "how to view your usage"
    }, {
      "parameter": "page_summaryfr",
      "value": "la façon de consulter votre utilisation"
    }, {
      "parameter": "phone_or_online",
      "value": "phone"
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usage_retrycnt",
        "value": null
      }, {
        "parameter": "phone_or_online",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Usage online or app",
    "name": "74be5f1a-5063-4106-8a9c-64b1a3b9ff27"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "handoff_type",
        "value": "self_serve"
      }, {
        "parameter": "usage_retrycnt",
        "value": null
      }, {
        "parameter": "phone_or_onlline",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "387b920d-a8f0-4af6-a487-d5c695f740d5"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usage_retrycnt",
        "value": null
      }, {
        "parameter": "phone_or_online",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319005F"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900XV"
      }, {
        "parameter": "sms_flow_option",
        "value": "app"
      } ]
    },
    "targetPage": "End Page",
    "name": "5651b10f-cc1a-4ac7-a784-2a5c8b6395cc"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "phone_or_online",
        "value": null
      } ]
    },
    "targetPage": "Usage online or app",
    "name": "60c8c463-e76e-42b6-b701-0aebed84a84c"
  }, {
    "condition": "$session.params.phone_or_online = \"phone\" OR $session.params.phone_or_online = \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "handoff_type",
        "value": "self_serve"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "2225118f-833c-46e5-bf16-9ccc501a3a40"
  }, {
    "condition": "$session.params.phone_or_online = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usage_retrycnt",
        "value": null
      }, {
        "parameter": "phone_or_online",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetPage": "Usage online or app",
    "name": "f7dcbcdb-d4e9-46ce-b909-ad2c0b7ec848"
  }, {
    "condition": "$session.params.phone_or_online = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Alright, let's get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "handoff_type",
        "value": "agent"
      }, {
        "parameter": "usage_retrycnt",
        "value": null
      }, {
        "parameter": "phone_or_online",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "00f83c65-956f-42fb-a286-21fa7798c90a"
  }, {
    "condition": "$session.params.usage_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usage_retrycnt",
        "value": 0
      } ]
    },
    "name": "af91c65f-881f-4426-bbfc-5635d6d0563a"
  }, {
    "condition": "$session.params.usage_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usage_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "a9427913-65a2-4753-ac21-5c4c89ff7f2b"
  }, {
    "condition": "$session.params.phone_or_online = \"online\" OR $session.params.phone_or_online = \"2\" OR $session.params.phone_or_online = \"self-serve\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usage_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "Usage online or app",
    "name": "2b86c74f-442a-4ef6-8121-0354428929b4"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "usage_retrycnt",
        "value": "$sys.func.ADD($session.params.usage_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.usage_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.usage_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "f6e8621e-eabb-4e9e-8f85-dc1f0f4994c8"
  } ]
}
