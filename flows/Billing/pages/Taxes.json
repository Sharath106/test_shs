{
  "name": "24519364-4e9b-434c-9887-5ff4ea398ac7",
  "displayName": "Taxes",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_taxes",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Aimeriez-vous que j'envoie un lien à votre téléphone avec plus d'informations?" ]
            },
            "languageCode": "fr-ca"
          }, {
            "text": {
              "text": [ "Would you like me to send a link with more information about taxes, to your phone now?" ]
            },
            "languageCode": "en"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte à votre téléphone avec plus d'informations sur les taxes?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send you a text on taxes on your phone?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "ed628bfd-3ded-440a-8576-0b96bd5a0341"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "aaadfc7c-bd30-4613-875b-a276b6c81459"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "e684d11b-5d77-4c36-a0ce-3cce43ac201a"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte à votre téléphone avec plus d'informations sur les taxes?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send you a text on taxes on your phone?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "475a812a-4e30-4f87-9d0d-9267ef84b254"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "3b14e768-a72e-42f8-a003-cb2ebb04befb"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "25be3ab6-74b1-4c47-8043-603b2e8f8201"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Taxes"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "taxes"
    }, {
      "parameter": "page_summaryfr",
      "value": "les taxes"
    }, {
      "parameter": "last_page_summary",
      "value": "understanding taxes"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "comprendre les taxes"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\") AND $session.params.app_first_poc = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Pour de l'information sur les taxes, vous devez utiliser votre compte Mon TELUS pour obtenir la résolution la plus rapide. Il est simple à utiliser et vous permet d'éviter d'attendre en ligne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Je vous envoie maintenant un lien vers le site Web." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez encore besoin d'aide, vous pouvez demander un rappel prioritaire à l'assistant virtuel dans votre compte Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To get information on taxes, you must use the TELUS website for the fastest resolution. It's easy to use and allows you to avoid waiting on the line." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "I am sending you a link to the website now." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you still need help, you can request a priority call back from the virtual assistant in your My TELUS account." ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Les taxes varient en fonction de votre province de résidence,, de la destination de votre voyage et de l'emplacement de la personne avec laquelle vous communiquez. Votre facture comportera une section distincte pour les taxes." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Taxes vary depending on your home province,, the destination you're traveling to,, and the location of the individual you're communicating with. Your bill will display a distinct section for taxes." ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319002R"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN73190075"
      }, {
        "parameter": "taxes_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_taxes",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "d8e8c57a-dd90-4165-a50e-c59415d4e9ff"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "taxes_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_taxes",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319002R"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN73190075"
      } ]
    },
    "targetPage": "End Page",
    "name": "3c7ad79d-71c7-4c09-bb52-e53b7d2519c4"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "taxes_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_taxes",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319002R"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN73190075"
      } ]
    },
    "targetPage": "End Page",
    "name": "082c683a-3992-4cf6-92e5-d7ef3cb76d40"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319002R"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN73190075"
      }, {
        "parameter": "taxes_retrycnt",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "68b90f45-85d4-4b82-b474-b569d5d6bd70"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319002R"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN73190075"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "8edc99e3-acd9-4651-9b7a-6fe1a55ea4b1"
  }, {
    "condition": "$session.params.dtmf_taxes = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Okay let me get someone to help you" ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "taxes_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_taxes",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "d986c4a2-a9c6-4e9f-be5c-e2e182b8b3d5"
  }, {
    "condition": "$session.params.dtmf_taxes = 1 OR $session.params.dtmf_taxes = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_taxes",
        "value": null
      }, {
        "parameter": "taxes_retrycnt",
        "value": "$sys.func.ADD($session.params.taxes_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "799c6a69-6c69-4d14-b351-a65388ea7ad8"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "taxes_retrycnt",
        "value": "$sys.func.ADD($session.params.taxes_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.taxes_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$session.params.taxes_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "name": "c4528052-a699-4c55-8c2d-1b1a1d1a1cd5"
  } ]
}
