{
  "name": "b9dd47db-339f-44b8-aac0-cf9b387ffcdb",
  "displayName": "Charge By Amount Display",
  "form": {
  
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Charge By Amount Display"
    }, {
      "parameter": "currentChargeItem",
      "value": "$sys.func.GET($session.params.ChargeItemAmount, $session.params.chargeIdx)"
    }, {
      "parameter": "chargeDes",
      "value": "$sys.func.SUBSTITUTE($session.params.currentChargeItem.chargeItemDescriptionTxt, \"\\([^)]*\\)\", \"\")"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.currentChargeItem.chargeType = \"partial\"",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003e\u003cprosody rate=\".80\"\u003e Je vois que vous avez des frais partiels de \u003csay-as interpret-as='currency' language='fr-CA'\u003e$session.params.currentChargeItem.otherChargeAmt $ \u003c/say-as\u003e sur votre dernière facture pour $session.params.chargeDes. \u003c/prosody\u003e Est-ce bien les frais dont vous voulez discuter? \u003c/speak\u003e" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003e\u003cprosody rate=\".80\"\u003e I see that you have \u003csay-as interpret-as='currency' language='en-US'\u003e$$session.params.currentChargeItem.otherChargeAmt\u003c/say-as\u003e for $session.params.chargeDes partial charge on your latest bill. \u003c/prosody\u003e Is this the charge you are looking for?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.currentChargeItem.chargeType != \"partial\"",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003e\u003cprosody rate=\".80\"\u003e Je vois que vous avez des frais de \u003csay-as interpret-as='currency' language='fr-CA'\u003e$session.params.currentChargeItem.otherChargeAmt $ \u003c/say-as\u003e sur votre dernière facture pour $session.params.chargeDes. \u003c/prosody\u003e Est-ce bien les frais dont vous voulez discuter? \u003c/speak\u003e" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003e\u003cprosody rate=\".80\"\u003e I see that you have \u003csay-as interpret-as='currency' language='en-US'\u003e$$session.params.currentChargeItem.otherChargeAmt\u003c/say-as\u003e for $session.params.chargeDes on your latest bill. \u003c/prosody\u003e Is this the charge you are looking for?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.currentChargeItem.chargeType != \"addOn\"",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003e\u003cprosody rate=\".80\"\u003e Je vois que vous avez des frais d'option de \u003csay-as interpret-as='currency' language='fr-CA'\u003e$session.params.currentChargeItem.otherChargeAmt $ \u003c/say-as\u003e sur votre dernière facture pour $session.params.chargeDes. \u003c/prosody\u003e Est-ce bien les frais dont vous voulez discuter? \u003c/speak\u003e" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003e\u003cprosody rate=\".80\"\u003e I see that you have \u003csay-as interpret-as='currency' language='en-US'\u003e$$session.params.currentChargeItem.otherChargeAmt\u003c/say-as\u003e for $session.params.chargeDes add on on your latest bill. \u003c/prosody\u003e Is this the charge you are looking for?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
    
    },
    "targetPage": "Charge Type Display",
    "name": "567257fe-ca5e-40f6-8f72-4ab6a932ef28"
  }, {
    "intent": "small_talk.confirmation_no",
    "condition": "$sys.func.ADD($session.params.chargeIdx, 1) \u003c $session.params.totalCharges",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord, laissez-moi vérifier s'il y a d'autres frais sur votre facture au montant d'environ $session.params.charge_amount $." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Okay, let me check for other charges on your bill around $$session.params.charge_amount." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "chargeIdx",
        "value": "$sys.func.ADD($session.params.chargeIdx, 1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "ac485d9e-9dc0-4837-ad8d-241a671cb417"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Il n'y a plus d'autres frais de $session.params.charge_amount $." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "There are no more charges of $$session.params.charge_amount." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetPage": "Anything Else",
    "name": "cc82676d-304f-4dd1-a70b-9347d35909a3"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.conversation.language = \"en-US\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sûr, laissez-moi vous connecter à un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "2fe46e21-d28c-49d5-8559-f77172a39371"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "($session.params.agent_attempt = 0 OR $session.params.agent_attempt = 1 OR $session.params.agent_attempt = 2) AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "agent_attempt",
        "value": "$sys.func.ADD($session.params.agent_attempt, 1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.agent_attempt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je comprends votre inquiétude, et je suis là pour vous aider. Étant donné que le temps d'attente pour nos agents peut être plus long que d'habitude, je suis convaincu que je peux vous aider avec votre demande. Souhaitez-vous continuer notre conversation afin que je puisse faire de mon mieux pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.agent_attempt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je suis là pour vous aider en toute confiance et avec toutes vos questions concernant votre facturation. Voudriez-vous me donner une autre chance pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Afin de vous faire gagner du temps, veuillez m'indiquer en détail vos questions de facturation." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "00842bb5-bb4a-48a6-b9db-13582c4d6498"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.agent_attempt = 3 AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sure, laissez-moi vous mettre en contacte avec un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "0991d7c1-bb52-4313-872c-d94cd7909ea7"
  } ],
  "eventHandlers": [ {
    "event": "sys.no-input-1",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Je suis désolé, je n'ai pas entendu.", "Désolé, je n'ai pas entendu.", "Je n'ai pas compris." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "la charge sur laquelle vous voulez en savoir d'avantage ?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I'm sorry, I didn't hear that.", "Sorry, I didn't hear that.", "I didn't catch that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Is this the charge you want to know more about?" ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "1a1b6634-c5c7-49a3-a309-849a372ec44b"
  }, {
    "event": "sys.no-input-2",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Je n'ai toujours pas compris.", "Je ne vous ai toujours pas entendu." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "la charge sur laquelle vous voulez en savoir d'avantage ?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I still didn't get that.", "I still didn't hear you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Is this the charge you want to know more about?" ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "9dbc0fb6-236b-47be-b268-72c8f17c48f1"
  }, {
    "targetPage": "No Match 2",
    "event": "sys.no-input-3",
    "triggerFulfillment": {
    
    },
    "name": "8cb94976-29f7-4820-9be1-39bb1b882a7b"
  }, {
    "event": "sys.no-match-1",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Désolé, je n'ai pas compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien compris." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "la charge sur laquelle vous voulez en savoir d'avantage ?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Is this the charge you want to know more about?" ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "bd4820a2-b5c4-4e0a-b97a-330a698d0ae0"
  }, {
    "event": "sys.no-match-2",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Je ne crois toujours pas avoir compris.", "Je ne comprends toujours pas." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "la charge sur laquelle vous voulez en savoir d'avantage ?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I'm still not sure I got this.", "I still don't quite understand." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Is this the charge you want to know more about?" ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "d825e579-0299-4a35-aaf1-0bdc97d0be25"
  }, {
    "targetPage": "No Match 2",
    "event": "sys.no-match-3",
    "triggerFulfillment": {
    
    },
    "name": "64dd9769-d1fa-4413-b8fc-b6b37ff99fdc"
  } ]
}
