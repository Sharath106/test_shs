{
  "name": "253ea7bf-2a8c-4557-ad9f-aa5c38ea27f5",
  "displayName": "Is Multiple Charge",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_is_multiple_charge",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Je ne pense pas avoir compris. ", "Je n’ai pas vraiment compris.", "Je ne crois pas avoir compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Pouvez-vous reformuler votre phrase? ", "Pouvez-vous essayer de reformuler votre question?", "Pouvez-vous reformuler cela pour moi?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "I'm not sure I got this one.", "I didn't really catch that.", "I'm not sure I understand." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Do you mind rephrasing?", "Can you try to rephrase your question? ", "Can you reword that for me?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "94d57aaf-3082-42cb-9103-bcbc6449c72e"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Je ne pense toujours pas avoir compris.", "Je ne comprends toujours pas bien." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Vous pouvez appuyer sur la touche 1 de votre clavier pour oui et 2 pour non." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "I'm still not sure I got this.", "I still don't quite understand." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "For Yes , Say Yes or Press 1 for Yes. For No, Say No or Press 2 on your dial pad." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "95d37b17-93d0-438a-ac64-3bba4a6ef07a"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "af82009b-1943-4ef6-ba93-3259ad4fdd88"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je n'ai pas bien compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous vérifier d'autres frais sur votre facture?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like to look at other charges on your bill?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "4a2bc37c-b637-4887-ba90-4269be80521e"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Pour vérifier d'autres frais sur votre facture, dites ou appuyez sur le 1, sinon dites ou appuyez sur le 2." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "To review other charges on your bill say Yes or press 1, else say No or press 2." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "b5b13d42-659f-4d9b-bfb3-8f6b72d46b6b"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "5c876b06-7350-4db8-b415-c93e978d4177"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 10
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "is_bill_breakdown_displayed",
      "value": "true"
    }, {
      "parameter": "last_page",
      "value": "is multiple charge"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.retrycnt_is_multiple_charge = null OR $session.params.retrycnt_is_multiple_charge = 0",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Aimeriez-vous vérifier d'autres frais sur votre facture?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Would you like to look at other charges on your bill?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.retrycnt_is_multiple_charge = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Voulez-vous vérifier d'autres frais sur votre facture?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Do you want to review other bill charges?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.retrycnt_is_multiple_charge = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Pour vérifier d'autres frais sur votre facture, dites ou appuyez sur le 1, sinon dites ou appuyez sur le 2." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To review other charges on your bill say or press one, else say or press 2." ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_no",
    "condition": "$session.params.from_bill_breakdown != true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "from_is_multiple_charge",
        "value": true
      } ]
    },
    "targetPage": "Bill Breakdown Confirmation",
    "name": "5a9d608d-2ba2-440a-9562-295a86a86407"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
    
    },
    "targetPage": "Is Multiple Lines",
    "name": "7dd5dddb-500b-4158-87e8-28eb6305cc08"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_charge_displayed = \"data_overage\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "count_data_overage",
        "value": null
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "c3dcbbb0-63e4-41c5-9db6-105766aba884"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_charge_displayed = \"airtime_overage\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "count_airtime_overage",
        "value": null
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "73d4da8d-bf94-4e6c-a5bd-fc3cc9f08a96"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_charge_displayed = \"connection_fee\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "count_connection_fee",
        "value": null
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "3cd50ce5-7ec4-4d05-926c-75951d35137d"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_charge_displayed = \"reconnection_fee\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "count_reconnection_fee",
        "value": null
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "f6675908-bc7c-46fb-b923-1305f10f9eec"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_charge_displayed = \"payment_overdue\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "count_payment_overdue",
        "value": null
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "232345d2-cb23-4b80-8bb9-a0587bbcf8c3"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_charge_displayed = \"partial_charges\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "count_partial_charges",
        "value": null
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "e1b5d7b7-7a46-4c79-8e2b-00d51cd84f70"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_return_page = \"bill_breakdown\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "count_intl_charges",
        "value": null
      }, {
        "parameter": "is_bill_breakdown_displayed",
        "value": null
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "0115a8e6-c84f-4fce-acc2-1dea7a282434"
  }, {
    "intent": "small_talk.repeat",
    "condition": "$session.params.last_charge_displayed = \"monthly_charges\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "Monthly Charges",
    "name": "61bc4625-fe9a-4759-be1d-6a6748080887"
  }, {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
    
    },
    "targetPage": "Bill Compare Checklist",
    "name": "2f91d70d-3999-4394-a6a6-cc28f59c1719"
  }, {
    "intent": "supplemental.check_another_bill",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "bill_period_select",
        "value": null
      }, {
        "parameter": "bill_period",
        "value": null
      } ]
    },
    "targetPage": "Select Current Bill",
    "name": "6d805f6b-043f-4c58-a4d1-d2cde1bc20e0"
  }, {
    "intent": "small_talk.repeat",
    "triggerFulfillment": {
    
    },
    "targetPage": "Current Page",
    "name": "1adce144-3f31-49d1-aa8f-a199ecf670e1"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.conversation.language = \"en-US\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sûr, il me fera plaisir de vous mettre en contact avec un membre de l’équipe." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "2ba7f3cd-0087-4bf8-b27a-eadea42f12e9"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "($session.params.agent_attempt = 0 OR $session.params.agent_attempt = 1 OR $session.params.agent_attempt = 2) AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "agent_attempt",
        "value": "$sys.func.ADD($session.params.agent_attempt, 1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.agent_attempt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je comprends votre inquiétude, et je suis là pour vous aider. Étant donné que le temps d'attente pour nos agents peut être plus long que d'habitude, je suis convaincu que je peux vous aider avec votre demande. Souhaitez-vous continuer notre conversation afin que je puisse faire de mon mieux pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.agent_attempt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je suis là pour vous aider en toute confiance et avec toutes vos questions concernant votre facturation. Voudriez-vous me donner une autre chance pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Afin de vous faire gagner du temps, veuillez m'indiquer en détail vos questions de facturation." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "866216ef-e900-4eb4-901b-37f299ce8ebd"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.agent_attempt = 3 AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sure, laissez-moi vous mettre en contacte avec un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "c0212c22-8c29-4d49-b1a8-b98174dd2f7c"
  }, {
    "condition": "$session.params.dtmf_is_multiple_charge = \"1\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "Bill Compare Checklist",
    "name": "34d99a30-5fde-4afd-8b90-77b26e53610b"
  }, {
    "condition": "$session.params.multiple_charges_explained \u003e= 1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "multiple_charges_explained",
        "value": "$sys.func.ADD($session.params.multiple_charges_explained ,1)"
      }, {
        "parameter": "charge_type_2",
        "value": "$session.params.last_charge_displayed"
      } ]
    },
    "name": "6b403ec1-69cf-4e6e-9df1-6b0dfaa08c70"
  }, {
    "condition": "$session.params.is_bill_breakdown_displayed = \"true\" AND $session.params.multiple_charges_explained = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "multiple_charges_explained",
        "value": 1
      }, {
        "parameter": "charge_type_1",
        "value": "$session.params.last_charge_displayed"
      } ]
    },
    "name": "62ac66ae-4312-4ab1-9788-e4bca259ac2f"
  }, {
    "condition": "($session.params.charge_type_1 = $session.params.charge_type_2 OR $session.params.multiple_charges_explained = 1) AND $session.params.is_via_anything_else != true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "is_bill_breakdown_displayed",
        "value": "false"
      } ]
    },
    "name": "74a5988d-228a-4d8e-b356-61e97f297989"
  }, {
    "condition": "$session.params.charge_type_1 != $session.params.charge_type_2 AND $session.params.multiple_charges_explained \u003e 1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "is_bill_breakdown_displayed",
        "value": "true"
      } ]
    },
    "name": "11c6bda6-140c-466a-8b85-523228c8a882"
  }, {
    "condition": "$session.params.dtmf_is_multiple_charge = \"2\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "Is Multiple Lines",
    "name": "153c7f07-bb32-4d8a-b4fe-aa56be396684"
  }, {
    "condition": "$session.params.retrycnt_is_multiple_charge = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "retrycnt_is_multiple_charge",
        "value": 0
      } ]
    },
    "name": "7e03e8dd-dfbf-4122-afe2-3b1a45fc6846"
  }, {
    "condition": "$session.params.retrycnt_is_multiple_charge \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "retrycnt_is_multiple_charge",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "bc36edb9-2105-4b7f-963e-a1b3f05e1c58"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "retrycnt_is_multiple_charge",
        "value": "$sys.func.ADD($session.params.retrycnt_is_multiple_charge ,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.retrycnt_is_multiple_charge = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas bien compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$session.params.retrycnt_is_multiple_charge = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "name": "c55eaa87-48ab-4199-aa36-dacd29251522"
  } ],
  "transitionRouteGroups": [ "AAM Plans Available", "Bill Balance", "Charges Details", "Data", "General follow-ups", "Main / All reasons", "Payment overdue", "Credit / Waive Fee / Discount", "Disambiguation", "Small Talk" ]
}
