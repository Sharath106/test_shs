{
  "name": "b97e1a9f-521f-4dfa-ba50-bb363f9d84fe",
  "displayName": "Bill Breakdown Confirmation",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_bill_breakdown_conf",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Je ne pense pas avoir compris.", "Je n'ai pas vraiment compris.", "Je ne crois pas avoir compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Pouvez-vous reformuler votre phrase, s'il vous plaît?", "Pouvez-vous essayer de reformuler votre question?", "Pouvez-vous reformuler votre phrase pour moi?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "I'm not sure I got this one.", "I didn't really catch that.", "I'm not sure I understand." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Do you mind rephrasing?", "Can you try to rephrase your question? ", "Can you reword that for me?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "e651edb5-a146-4fbb-9ebc-2ade09a1b4bb"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Je ne crois toujours pas avoir compris.", "Je ne comprends toujours pas bien." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Vous pouvez dire ou appuyer sur 1 pour entendre le détail des frais de votre facture ou sur 9 pour le recevoir par message texte." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "I'm still not sure I got this.", "I still don't quite understand." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "For Bill Breakdown, You can press 1 or Say bill breakdown. To receive a text , press 9" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "dc981939-8c16-46e8-977c-a45c9723ddf6"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "1e58dae2-25aa-4870-a36f-7ddc60f590f9"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je n'ai pas bien compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous entendre les détails de votre facture ou préférez-vous recevoir un message texte qui vous expliquera comment consulter votre facture en ligne?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like to hear a breakdown of your bill or receive a text on how to view your bill online?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "1b3dc4cc-65d3-42df-a74d-b7e808f18b8e"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Pour entendre les détails de votre facture, dites ou appuyez sur le 1. Pour recevoir les étapes afin de consulter votre facture en ligne par message texte, dites ou appuyez sur le 9." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "To hear out your bill breakdown say bill breakdown or Press 1. To get a step by step guide on how to check it online, Press 9." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "4ce891f0-01f6-4276-af73-1861bba6f201"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "efda2846-1daa-4882-880f-5c02743c8830"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 10
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "last_page",
      "value": "bill breakdown confirmation"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.bill_breakdown_conf = null OR $session.params.bill_breakdown_conf = 0",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Il y a plusieurs frais sur votre facture. Aimeriez-vous entendre les détails de votre facture pour voir si elle est plus elevée que d'habitude?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Would you like to hear a breakdown of your bill to see why it may be higher than expected?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.bill_breakdown_conf = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Il y a plusieurs frais sur votre facture. Aimeriez-vous entendre les détails de votre facture pour voir si elle est plus elevée que d'habitude?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Would you like to hear a breakdown of your bill to see why it may be higher than expected?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.bill_breakdown_conf = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Pour entendre les détails de votre facture, dites ou appuyez sur 1, ou pour recevoir les étapes de comment y aller en ligne, dites ou appuyez sur 9." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To hear out your bill breakdown say or press 1 or to get step by step guide on how to check it online, say or press 9" ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "3ccd2cd6-a3db-44ec-8396-697d078b5498"
  }, {
    "intent": "supplemental.breakdown_bill",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "8fee5e03-5365-4540-8814-24b3b6a56148"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
    
    },
    "targetPage": "Anything Else",
    "name": "2c3f42e0-72e7-4a16-99ae-7f5b0eb82f41"
  }, {
    "intent": "small_talk.send_sms",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "bill_breakdown_conf",
        "value": null
      } ]
    },
    "targetPage": "View Bill Breakdown_online or app",
    "name": "19c93e31-b37f-4bbb-bf9f-673e268e4467"
  }, {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Aimeriez-vous entendre le détail des frais de votre facture ou recevoir ce détail par message texte?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Vous pouvez appuyer sur 1 pour entendre le détail des frais de votre facture ou sur 9 pour le recevoir par message texte." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Would you like to hear a breakdown of your bill or receive the bill breakdown via text?", "To hear out your bill breakdown say or press 1 or to get step by step guide on how to check it online, say or press 9" ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "f5ca1047-9837-42d3-9b09-db7a6b1e7152"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
    
    },
    "targetPage": "Anything Else",
    "name": "22e1a74e-41c0-42b0-8ec0-82e3080fb7cb"
  }, {
    "intent": "small_talk.repeat",
    "triggerFulfillment": {
    
    },
    "targetPage": "Current Page",
    "name": "797eb87d-e023-4d6f-8307-e59b0edafe16"
  }, {
    "intent": "supplemental.check_another_bill",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "bill_period_select",
        "value": null
      }, {
        "parameter": "bill_period",
        "value": null
      } ]
    },
    "targetPage": "Select Current Bill",
    "name": "f410176d-4861-47d1-b2cb-45a2ee677663"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.conversation.language = \"en-US\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sûr, il me fera plaisir de vous mettre en contact avec un membre de l’équipe." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "aba9e5d2-499a-4307-877d-162d09f51812"
  }, {
    "intent": "supplemental.charges_details",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sûr, je peux vous aider à examiner les détails des frais sur votre facture.", "k, je peux jeter un coup œil aux détails de votre facture." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Sure, I can help review details of the charges on your bill. ", "Ok, I can take a look at the details of your bill." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "last_ci",
        "value": "charges_details"
      } ]
    },
    "targetPage": "Bill Compare Checklist",
    "name": "8794a67d-4e9b-4f15-b1e5-7abdc534ca3e"
  }, {
    "intent": "head_intent.bill_vague",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "bill_vague"
      } ]
    },
    "targetFlow": "Bill Vague",
    "name": "acd58253-d33b-4f00-a0d2-8d1c99eba8a9"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "($session.params.agent_attempt = 0 OR $session.params.agent_attempt = 1 OR $session.params.agent_attempt = 2) AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "agent_attempt",
        "value": "$sys.func.ADD($session.params.agent_attempt, 1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.agent_attempt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je comprends votre inquiétude, et je suis là pour vous aider. Étant donné que le temps d'attente pour nos agents peut être plus long que d'habitude, je suis convaincu que je peux vous aider avec votre demande. Souhaitez-vous continuer notre conversation afin que je puisse faire de mon mieux pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.agent_attempt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je suis là pour vous aider en toute confiance et avec toutes vos questions concernant votre facturation. Voudriez-vous me donner une autre chance pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Afin de vous faire gagner du temps, veuillez m'indiquer en détail vos questions de facturation." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "067d8450-3c70-41cf-9e52-6166decf2b40"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.agent_attempt = 3 AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sure, laissez-moi vous mettre en contacte avec un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "438c905b-22a1-4ce4-8ac9-17825d8c0c28"
  }, {
    "condition": "$session.params.dtmf_bill_breakdown_conf = \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Bill Breakdown",
    "name": "8963c6ec-e523-4a4f-a9ff-4f25f681f98c"
  }, {
    "condition": "$session.params.dtmf_bill_breakdown_conf = \"9\" OR $session.params.dtmf_bill_breakdown_conf = \"2\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "bill_breakdown_conf",
        "value": null
      } ]
    },
    "targetPage": "View Bill Breakdown_online or app",
    "name": "7ba6d80b-15a1-44f7-9d09-3601f7bb35b9"
  }, {
    "condition": "$session.params.bill_breakdown_conf = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "bill_breakdown_conf",
        "value": 0
      } ]
    },
    "name": "b86000ff-807f-49cc-8b57-82b25686e728"
  }, {
    "condition": "$session.params.bill_breakdown_conf \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "bill_breakdown_conf",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "dafd22d9-c585-471b-94d8-32b3c0632f61"
  }, {
    "condition": "$session.params.dtmf_bill_breakdown_conf = 3 OR $session.params.dtmf_bill_breakdown_conf = 4 OR $session.params.dtmf_bill_breakdown_conf = 5 OR $session.params.dtmf_bill_breakdown_conf = 6 OR $session.params.dtmf_bill_breakdown_conf = 7 OR $session.params.dtmf_bill_breakdown_conf = 8",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Désolé, je n'ai pas bien compris." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_bill_breakdown_conf",
        "value": null
      }, {
        "parameter": "bill_breakdown_conf",
        "value": "$sys.func.ADD($session.params.bill_breakdown_conf,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "a9c40de4-1441-4da3-b5e6-e1ceb0908f0a"
  }, {
    "condition": "$session.params.dtmf_bill_breakdown_conf = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord. Je vais trouver quelqu'un qui pourra vous assister." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Alright, let's get someone to help you." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "530f6b33-5447-4047-a0b3-754e191d27b1"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "bill_breakdown_conf",
        "value": "$sys.func.ADD($session.params.bill_breakdown_conf ,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.bill_breakdown_conf = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas bien compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$session.params.bill_breakdown_conf = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "name": "5dfe6ca3-55d7-4892-b7da-dcff3485eda5"
  } ],
  "transitionRouteGroups": [ "Bill Balance", "General follow-ups", "Disambiguation" ]
}
