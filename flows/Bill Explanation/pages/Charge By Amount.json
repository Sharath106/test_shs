{
  "name": "4612f8f9-db95-4854-ab30-6a911a8795b4",
  "displayName": "Charge By Amount",
  "form": {
  
  },
  "entryFulfillment": {
    "webhook": "Bill explain",
    "tag": "charge_by_amount_mob",
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Charge By Amount"
    }, {
      "parameter": "isFFH",
      "value": false
    } ]
  },
  "transitionRoutes": [ {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Please wait ! I am still working on your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Veuillez patienter pendant que je traite votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": 1
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "name": "7dd27c67-043a-40b3-b286-eedced0bf6a2"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I seem to be having an issue with your request.", "I'm afraid I'm having an issue with your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Il semble y avoir un problème avec votre demande.", "J'éprouve malheureusement des difficultés avec votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      }, {
        "parameter": "route",
        "value": "bill_explanation"
      } ]
    },
    "targetFlow": "Billing",
    "name": "3f48f759-1634-463b-92cf-9b4ee479eac1"
  }, {
    "condition": "$sys.func.COUNT($session.params.ChargeItemAmount) = 0",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I didn't find the charge of $$session.params.charge_amount. So let's review your bill." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je rencontre des difficultés à trouver les frais au montant de $session.params.charge_amount $. Permettez-moi d'essayer une autre méthode." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "bill_period",
        "value": "0"
      }, {
        "parameter": "bill_period_select",
        "value": "current"
      } ]
    },
    "targetPage": "Fetch Bill Details",
    "name": "85f79c97-efd6-4c60-b7b1-1b17d407ed32"
  }, {
    "condition": "$sys.func.COUNT($session.params.ChargeItemAmount) != 0",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "service",
        "value": "$session.params.ChargeItemAmount[0].service"
      }, {
        "parameter": "chargeType",
        "value": "$session.params.ChargeItemAmount[0].chargeType"
      }, {
        "parameter": "totalCharges",
        "value": "$sys.func.COUNT($session.params.ChargeItemAmount)"
      }, {
        "parameter": "chargeIdx",
        "value": 0
      }, {
        "parameter": "reverse_lookup_mapped",
        "value": "true"
      } ]
    },
    "targetPage": "Charge By Amount Display",
    "name": "35d2d04b-2e65-4d84-833d-7b72e62b08ce"
  } ]
}
