{
  "name": "438d30b0-450a-4e97-883e-54c263b7ca30",
  "displayName": "Select Previous Bill",
  "form": {
    "parameters": [ {
      "displayName": "bill_period_select",
      "required": true,
      "entityType": "@bill-period",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Je ne pense pas avoir compris.", "Je n'ai pas vraiment compris.", "Je ne crois pas avoir compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Vous pouvez répondre par oui ou non.", "Veuillez répondre par oui ou non." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "I'm not sure I got this one.", "I didn't really catch that.", "I'm not sure I understand." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "You can answer by yes or no.", "Please answer with yes or no." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "b853067d-f8dd-4bb4-bf95-3d7d04391045"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Je ne pense pas avoir compris.", "Je ne comprends toujours pas bien.", "Je n'ai toujours pas compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous plutôt vérifier votre facture émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"dd MMMM YYYY\", \"fr-ca\")? Vous pouvez dire ou appuyer sur 1 pour oui, ou sur 2 pour Non.", "Aimeriez-vous plutôt consulter votre facture émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"dd MMMM YYYY\", \"fr-ca\")? Vous pouvez dire ou appuyer sur 1 pour oui, ou sur 2 pour Non.", "Préféreriez-vous revoir votre facture émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"dd MMMM YYYY\", \"fr-ca\")? Vous pouvez dire ou appuyer sur 1 pour oui, ou sur 2 pour Non." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "I'm still not sure I got this one.", "I still don't quite understand.", "I still didn't catch that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like to check your invoice issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\") instead? You can type 1 for Yes and 2 for No on your dial pad.", "Would you like take a look your bill issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\") instead? You can type 1 for Yes and 2 for No on your dial pad.", "Would you rather look at your bill from $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\")? You can type 1 for Yes and 2 for No on your dial pad." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "6704d959-c973-4a7a-8e88-cbf1584adcc4"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "db9c178d-8e05-48da-84f4-021dde0b4490"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je n'ai pas bien compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaiteriez-vous plutôt jeter un oeil à votre dernière facture émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"dd MMMM, yyyy\", \"fr-ca\")?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like to take a look at your previous bill issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\") instead?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "333fe6d3-0fcc-464c-89db-6b1d131dfd80"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Si vous avez des questions par rapport à votre dernière facture émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 0), \"dd MMMM, yyyy\", \"fr-ca\"), appuyez sur le 1, sinon appuyez sur le 2." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "If you are inquiring about your previous bill issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\"), press 1, to say no press 2." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "44b72d99-1403-46fe-a234-33c380d761d9"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "99136147-231c-4a19-bc48-3773f3792b84"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 10
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "bill_period_select",
      "value": null
    }, {
      "parameter": "last_page",
      "value": "select_previous_bill"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.retrycnt_select_previous_bill = null OR $session.params.retrycnt_select_previous_bill = 0",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Préféreriez-vous vérifier votre facture précédente émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"dd MMMM YYYY\", \"fr-ca\")?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Would you like to check your previous invoice issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\") instead?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.retrycnt_select_previous_bill = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Préféreriez-vous revoir votre facture précédente émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"dd MMMM YYYY\", \"fr-ca\")?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Would you like to take a look at your previous bill issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\") instead?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.retrycnt_select_previous_bill = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Si vous avez des questions par rapport à votre facture précédente émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"dd MMMM YYYY\", \"fr-ca\"), appuyez sur le 1, sinon appuyez sur le 2." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you are inquiring about your previous bill issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 1), \"MMMM dd, yyyy\", \"en\"), press 1, to say no press 2." ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ],
    "advancedSettings": {
      "playbackInterruptionSettings": {
      
      }
    }
  },
  "transitionRoutes": [ {
    "intent": "supplemental.confirm_bill_period",
    "condition": "$session.params.given_bill_period != null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "given_month",
        "value": "$session.params.given_bill_period.startDate.month"
      }, {
        "parameter": "last_page",
        "value": "select_previous_bill"
      } ]
    },
    "targetPage": "Verify Bill Month",
    "name": "34223890-d77f-42ba-bf57-74cd9dda1691"
  }, {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Ok, regardons votre facture précédente.", "D'accord, laissez-moi vérifier votre relevé de compte précédent.", "Ok, allons voir votre facture précédente.", "D'accord, laissez-moi vérifier votre facture précédente." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Ok, let's look at your previous bill.", "Sure, let me check your previous bill.", "Ok, let's look at your previous invoice.", "Sure, let me check your previous invoice." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "bill_period",
        "value": "-1"
      }, {
        "parameter": "bill_period_select",
        "value": "previous"
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "Fetch Bill Details",
    "name": "a17f007a-0100-4b3a-9efc-9b62966aa4d8"
  }, {
    "intent": "small_talk.confirmation_no",
    "condition": "$session.params.from_verify_bill_month = true",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Got it." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "from_verify_bill_month",
        "value": null
      }, {
        "parameter": "route",
        "value": "bill_reprint"
      } ]
    },
    "targetFlow": "Billing",
    "name": "60486b90-a5c9-4a23-828c-3b974a45d011"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Pour consulter des factures datant de 3 mois et plus, vous pouvez utiliser votre compte Mon TELUS en ligne ou l'application Mon TELUS." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "To view bills that are 3 months or older, you can use your My TELUS account online or the My TELUS app." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "bill_period_select",
        "value": null
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "Check Older Month",
    "name": "7c90515b-dc57-40fd-ad2e-de842ea7906e"
  }, {
    "intent": "small_talk.repeat",
    "triggerFulfillment": {
    
    },
    "targetPage": "Current Page",
    "name": "69667e7b-52a3-4fbd-9375-4de3ad8275be"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.conversation.language = \"en-US\"",
    "triggerFulfillment": {
    
    },
    "targetFlow": "Universal handoff",
    "name": "faf795de-f488-450e-8601-843b2691e559"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "($session.params.agent_attempt = 0 OR $session.params.agent_attempt = 1 OR $session.params.agent_attempt = 2) AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "agent_attempt",
        "value": "$sys.func.ADD($session.params.agent_attempt, 1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.agent_attempt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je comprends votre inquiétude, et je suis là pour vous aider. Étant donné que le temps d'attente pour nos agents peut être plus long que d'habitude, je suis convaincu que je peux vous aider avec votre demande. Souhaitez-vous continuer notre conversation afin que je puisse faire de mon mieux pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.agent_attempt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Je suis là pour vous aider en toute confiance et avec toutes vos questions concernant votre facturation. Voudriez-vous me donner une autre chance pour vous aider ?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Afin de vous faire gagner du temps, veuillez m'indiquer en détail vos questions de facturation." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "f52c0dd0-2db6-4f68-a33f-5552be1a69f4"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.agent_attempt = 3 AND $session.params.conversation.language = \"fr-CA\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Bien sure, laissez-moi vous mettre en contacte avec un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "441e3962-7450-4a52-899f-7e0e90baf96c"
  }, {
    "condition": "$session.params.bill_period_select = \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Ok, regardons votre facture précédente.", "D'accord, laissez-moi vérifier votre relevé de compte précédent.", "Ok, allons voir votre facture précédente.", "D'accord, laissez-moi vérifier votre facture précédente." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Ok, let's look at your previous bill.", "Sure, let me check your previous bill.", "Ok, let's look at your previous invoice.", "Sure, let me check your previous invoice." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "bill_period",
        "value": "-1"
      }, {
        "parameter": "bill_period_select",
        "value": "previous"
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "Fetch Bill Details",
    "name": "4332efaf-bd97-41c5-948f-bec22d16916b"
  }, {
    "condition": "$session.params.bill_period_select = \"2\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Pour consulter des factures datant de 3 mois et plus, vous pouvez utiliser votre compte Mon TELUS en ligne ou l'application Mon TELUS." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Voulez-vous consulter une ancienne facture avec un membre de l'équipe?" ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "bill_period_select",
        "value": null
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "Check Older Month",
    "name": "0fce574e-c2ec-4689-9a23-8209a3f45185"
  }, {
    "condition": "$session.params.bill_period_select = \"current\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Certainement, laissez-moi vérifier votre facture émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 0), \"dd MMMM yyyy\", \"fr-ca\").", "Absolument, laissez-moi vérifier votre relevé de compte émis le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 0), \"dd MMMM yyyy\", \"fr-ca\").", "Ok, allons voir votre facture émise le $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 0), \"dd MMMM yyyy\", \"fr-ca\")." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Sure, let me check your latest invoice issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 0), \"MMMM dd, yyyy\", \"en\").", "Absolutely, let me take a look your latest bill issued on $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 0), \"MMMM dd, yyyy\", \"en\").", "Ok, let's look at your latest bill from $sys.func.FORMAT_DATE($sys.func.GET($session.params.bill_dates, 0), \"MMMM dd, yyyy\", \"en\")." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "bill_period",
        "value": "0"
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "Fetch Bill Details",
    "name": "2858130f-2757-4087-94a1-94eb3086c991"
  }, {
    "condition": "$session.params.bill_period_select = \"previous\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Ok, regardons votre facture précédente.", "D'accord, laissez-moi vérifier votre relevé de compte précédent. ", "Ok, allons voir votre facture précédente. ", "D'accord, laissez-moi vérifier votre facture précédente." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Ok, let's look at your previous bill.", "Sure, let me check your previous bill.", "Ok, let's look at your previous invoice.", "Sure, let me check your previous invoice." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "bill_period",
        "value": "-1"
      }, {
        "parameter": "bill_period_select",
        "value": null
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "Fetch Bill Details",
    "name": "d7cde025-3538-41de-a85a-661713c16d31"
  }, {
    "condition": "$session.params.bill_period_select = \"older\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Pour consulter des factures datant de 3 mois et plus, vous pouvez utiliser votre compte Mon TELUS en ligne ou l'application Mon TELUS." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Voulez-vous consulter une ancienne facture avec un membre de l'équipe?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "To view invoices 3 months or older, you can use your online My TELUS account or the My TELUS app." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I can help you connect with a team member." ]
        },
        "languageCode": "en"
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "Check Older Month",
    "name": "9c53a41c-c16e-4b33-95ca-19ad9998b482"
  }, {
    "condition": "$session.params.retrycnt_select_previous_bill = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "retrycnt_select_previous_bill",
        "value": 0
      } ]
    },
    "name": "b73d42a2-d9bb-4ed0-b396-a3daf0e1be0a"
  }, {
    "condition": "$session.params.retrycnt_select_previous_bill \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "retrycnt_select_previous_bill",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "872871d0-6749-4c25-99f9-cf011a4259d7"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "retrycnt_select_previous_bill",
        "value": "$sys.func.ADD($session.params.retrycnt_select_previous_bill ,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.retrycnt_select_previous_bill = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas bien compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$session.params.retrycnt_select_previous_bill = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "name": "c242460c-2161-49d4-b519-1b573df872eb"
  } ],
  "transitionRouteGroups": [ "Agent Handoff", "Bill Balance" ]
}
