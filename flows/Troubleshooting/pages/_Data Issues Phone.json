{
  "name": "9a12d12e-499f-4e1f-859d-373c846e8781",
  "displayName": "_Data Issues Phone",
  "form": {
    "parameters": [ {
      "displayName": "phone_number",
      "required": true,
      "entityType": "@sys.phone-number",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Hmm, ça ne ressemble pas à un numéro de téléphone. Veuillez entrer un numéro de téléphone valide pour continuer.", "Cela ne semble pas être un numéro valide. Veuillez entrer votre numéro de téléphone à 10 chiffres pour continuer." ]
              },
              "languageCode": "fr-ca"
            } ],
            "conditionalCases": [ {
              "cases": [ {
                "condition": "$session.params.phoneNumberCount \u003c 5"
              }, {
              
              } ]
            } ]
          },
          "name": "656d8ca2-145e-4607-976d-9fc1c097813e"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-2",
          "triggerFulfillment": {
          
          },
          "name": "b274105d-f524-4f4a-a18d-4c4398dd32e4"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "useSystemEntityRule": false
        }
      }
    } ]
  },
  "entryFulfillment": {
    "webhook": "Account Identity",
    "tag": "get_phone_numbers",
    "setParameterActions": [ {
      "parameter": "valid_phone_number",
      "value": null
    }, {
      "parameter": "last_page",
      "value": "_Data Issues Phone"
    } ]
  },
  "transitionRoutes": [ {
    "intent": "supplemental.num_notonlist",
    "condition": "$session.params.no_find_phone_number = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "no_find_phone_number",
        "value": "true"
      } ]
    },
    "targetPage": "_Data Issues Recently port in",
    "name": "3c4eef9d-758f-440c-8694-fa6e64a61d4e"
  }, {
    "intent": "supplemental.num_notonlist",
    "condition": "$session.params.no_find_phone_number = true",
    "triggerFulfillment": {
    
    },
    "targetPage": "_Data Issues Recently port in",
    "name": "576ee7c6-d00c-4363-9cf2-4c83563fcf44"
  }, {
    "intent": "small_talk.confirmation_yes",
    "condition": "$session.params.phone_number != null AND $session.params.phoneNumberCount != \"1\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "_Data Issues Acct Validation",
    "name": "ead6bccb-8489-48ac-b7a0-e9b8bdb4d0e3"
  }, {
    "intent": "small_talk.confirmation_no",
    "condition": "$session.params.phone_number != null AND $session.params.phoneNumberCount != \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "phone_number",
        "value": null
      }, {
        "parameter": "phone_number_counter",
        "value": null
      } ]
    },
    "targetPage": "Current Page",
    "name": "f30de9cc-b217-45ab-a8f7-bbee14242fbf"
  }, {
    "intent": "small_talk.confirmation_yes",
    "condition": "$session.params.phoneNumberCount = \"1\"",
    "triggerFulfillment": {
      "webhook": "Account Identity",
      "tag": "selected_phone_number",
      "setParameterActions": [ {
        "parameter": "phone_number",
        "value": "$session.params.filtered_phoneNumbers[0]"
      }, {
        "parameter": "phone_number_counter",
        "value": "1"
      } ]
    },
    "targetPage": "_Data Issues Acct Validation",
    "name": "3488191c-7392-49a4-8a9d-2c660f6f21ec"
  }, {
    "intent": "small_talk.confirmation_no",
    "condition": "$session.params.phoneNumberCount = \"1\" AND $session.params.no_find_phone_number = null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I can't seem to find any other phone numbers associated with your profile. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I have some questions I can still ask you. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je n'arrive pas à trouver d'autres numéros de téléphone associés à votre profil." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "J'ai des questions que je peux encore vous poser." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "no_find_phone_number",
        "value": "true"
      } ]
    },
    "targetPage": "_Data Issues Recently port in",
    "name": "4406e0c2-e0ca-4a09-8105-c1402430a40b"
  }, {
    "intent": "small_talk.confirmation_no",
    "condition": "$session.params.phoneNumberCount = \"1\" AND $session.params.no_find_phone_number = \"true\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I still can't find the phone number you're inquiring about." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I have some questions I can still ask you. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je ne trouve toujours pas le numéro de téléphone que vous demandez." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "J'ai des questions que je peux encore vous poser." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetPage": "_Data Issues Recently port in",
    "name": "91611422-edb3-46d9-a72d-ae3524771b04"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I can still ask you other questions." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je peux encore vous poser d'autres questions." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetPage": "_Data Issues Recently port in",
    "name": "8bb88b26-edde-4d90-8642-35b1b0db6b4f"
  }, {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "⏳ Please wait, I am still working on your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "⏳ Veuillez patienter, je travaille toujours sur votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": "1"
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ],
      "returnPartialResponses": true
    },
    "targetPage": "Current Page",
    "name": "e2b11d57-85bb-4c14-aa5c-4aac995a36cc"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "targetPage": "_Data Issues Recently port in",
    "name": "05a9ac54-8ae6-476a-bcb1-62c95190bcd3"
  }, {
    "condition": "($session.params.phone_number != null AND $session.params.phone_number_counter != 1) OR ($session.params.phone_number_counter = 1 AND $session.params.phoneNumberCount = 1)",
    "triggerFulfillment": {
      "webhook": "Account Identity",
      "tag": "selected_phone_number",
      "setParameterActions": [ {
        "parameter": "phone_number_counter",
        "value": "1"
      } ]
    },
    "targetPage": "_Data Issues Acct Validation",
    "name": "47da8343-ebbc-4789-bc7d-2f7de1b9994b"
  }, {
    "condition": "$session.params.phone_number_counter != \"1\" AND $session.params.phoneNumberCount = 1",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Is $session.params.filtered_phoneNumbers[0] the phone number you are inquiring about?" ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Le $session.params.filtered_phoneNumbers[0] est-il le numéro de téléphone auquel vous souhaitez vous renseigner?" ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "b814c09b-ea91-451b-80ea-a45029f73529"
  }, {
    "condition": "$session.params.phone_number != null AND $session.params.phone_number_counter = \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Is $session.params.phone_number still the phone number you're inquiring about?" ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Souhaitez-vous toujours poursuivre avec le $session.params.phone_number ?" ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "a44e7b70-33d8-47b1-a517-f2bccffb43c8"
  }, {
    "condition": "$session.params.phoneNumberCount = \"2\" AND $session.params.phone_number = null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Which phone number are you inquiring about?" ]
        },
        "languageCode": "en"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            } ]
          }
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Vous aimeriez continuer avec quel numéro de téléphone?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            } ]
          }
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "dcdc1519-9917-4e6f-aead-88ca7f2fc6c2"
  }, {
    "condition": "$session.params.phoneNumberCount = \"3\" AND $session.params.phone_number = null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Which phone number are you inquiring about?" ]
        },
        "languageCode": "en"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[2]",
              "text": "$session.params.filtered_phoneNumbers[2]"
            } ]
          }
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Vous aimeriez continuer avec quel numéro de téléphone?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[2]",
              "text": "$session.params.filtered_phoneNumbers[2]"
            } ]
          }
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "d1bc6a6b-0ada-464c-bdbd-10cf5bb6516a"
  }, {
    "condition": "$session.params.phoneNumberCount = \"4\" AND $session.params.phone_number = null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Which phone number are you inquiring about?" ]
        },
        "languageCode": "en"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[2]",
              "text": "$session.params.filtered_phoneNumbers[2]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[3]",
              "text": "$session.params.filtered_phoneNumbers[3]"
            } ]
          }
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Vous aimeriez continuer avec quel numéro de téléphone?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[2]",
              "text": "$session.params.filtered_phoneNumbers[2]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[3]",
              "text": "$session.params.filtered_phoneNumbers[3]"
            } ]
          }
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "df578e2c-c089-45c2-93d1-d4cb3d0d0600"
  }, {
    "condition": "$session.params.phoneNumberCount = \"5\" AND $session.params.phone_number = null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Which phone number are you inquiring about?" ]
        },
        "languageCode": "en"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[2]",
              "text": "$session.params.filtered_phoneNumbers[2]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[3]",
              "text": "$session.params.filtered_phoneNumbers[3]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[4]",
              "text": "$session.params.filtered_phoneNumbers[4]"
            } ]
          }
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Vous aimeriez continuer avec quel numéro de téléphone?" ]
        },
        "languageCode": "fr-ca"
      }, {
        "payload": {
          "quickReplies": {
            "replies": [ {
              "responsePayload": "$session.params.filtered_phoneNumbers[0]",
              "text": "$session.params.filtered_phoneNumbers[0]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[1]",
              "text": "$session.params.filtered_phoneNumbers[1]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[2]",
              "text": "$session.params.filtered_phoneNumbers[2]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[3]",
              "text": "$session.params.filtered_phoneNumbers[3]"
            }, {
              "responsePayload": "$session.params.filtered_phoneNumbers[4]",
              "text": "$session.params.filtered_phoneNumbers[4]"
            } ]
          }
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "66479537-dcea-4232-b471-84e47fb49dd9"
  }, {
    "condition": "$session.params.phoneNumberCount \u003e \"5\" AND $session.params.phone_number = null",
    "triggerFulfillment": {
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.invalid_number_counter = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "What phone number are you inquiring about?" ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Vous aimeriez continuer avec quel numéro de téléphone?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "It looks like you have many phone numbers associated to your profile." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "What phone number are you inquiring about?" ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Vous semblez avoir plusieurs numéros de téléphone associé au profile." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Vous aimeriez continuer avec quel numéro de téléphone?" ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "60abec0c-a1a2-4ed7-9dff-fa54fcf9da58"
  }, {
    "condition": "$session.params.out_of_scope_ffh = \"true\" OR $session.params.filtered_phoneNumbers[0] = null",
    "triggerFulfillment": {
    
    },
    "targetPage": "_Data Issues Recently port in",
    "name": "b6d03a50-335b-4831-a219-c713708cf93b"
  } ]
}
