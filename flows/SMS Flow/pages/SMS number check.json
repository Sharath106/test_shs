{
  "name": "54215a9b-9d3d-4c53-82cb-1515076b9230",
  "displayName": "SMS number check",
  "form": {
  
  },
  "entryFulfillment": {
  
  },
  "transitionRoutes": [ {
    "condition": "($session.params.conversation.useANI = \"false\" OR $session.params.serviceType = \"WIRELINE\" OR $session.params.serviceType = \"null\") AND $session.params.sms_phone_number = null",
    "triggerFulfillment": {
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.mandatory_ss = \"true\" AND $session.params.app_first_poc = true AND ($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\")"
        }, {
          "condition": "$session.params.mandatory_ss = \"true\"",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Laissez-moi vous envoyer un message texte avec plus de détails." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Let me send a quick text with more details." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
        
        } ]
      } ]
    },
    "targetPage": "SMS Phone Number Collection",
    "name": "30934ab7-1796-48e4-9174-e4c01e6fa908"
  }, {
    "condition": "$session.params.mandatory_ss = \"true\" AND $session.params.user.utn = $session.params.user.ani AND $session.params.sms_phone_number = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_number",
        "value": "1"
      }, {
        "parameter": "mobileCarrierIsTelus",
        "value": "y"
      }, {
        "parameter": "shortCode",
        "value": "5420"
      }, {
        "parameter": "sms_phone_number",
        "value": "$session.params.user.ani"
      }, {
        "parameter": "force_sms",
        "value": "true"
      } ]
    },
    "targetPage": "SMS Link",
    "name": "0fd287b9-b057-4dcc-a46f-93d6f6a5522a"
  }, {
    "condition": "$session.params.mandatory_ss = \"true\" AND $session.params.user.utn != $session.params.user.ani AND $session.params.sms_phone_number = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_phone_number",
        "value": "$session.params.user.ani"
      }, {
        "parameter": "force_sms",
        "value": "true"
      } ]
    },
    "targetPage": "SMS Phone Number Collection \u003e confirmed",
    "name": "e80b8b8e-5628-4fd6-8d20-8664145ad1fe"
  }, {
    "condition": "$session.params.mandatory_ss = \"true\" AND ($session.params.user.utn != $session.params.user.ani OR $session.params.user.utn = $session.params.user.ani) AND $session.params.sms_phone_number != null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "force_sms",
        "value": "true"
      } ]
    },
    "targetPage": "SMS Phone Number Collection \u003e confirmed",
    "name": "002e2400-9a46-4224-9f7c-9a4c540d5d51"
  }, {
    "condition": "$session.params.sms_phone_number != null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "num_already_selected",
        "value": true
      } ]
    },
    "targetPage": "SMS Link",
    "name": "7ad8f802-b587-42bc-aefe-40134d67a989"
  }, {
    "condition": "$session.params.user.utn = $session.params.user.ani OR $session.params.serviceType = \"WIRELESS\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "mobileCarrierIsTelus",
        "value": "y"
      }, {
        "parameter": "original_num",
        "value": true
      }, {
        "parameter": "shortCode",
        "value": "5420"
      } ]
    },
    "targetPage": "SMS Link",
    "name": "bbcd2f28-28d9-4cc7-8eed-e9edeade2b50"
  }, {
    "condition": "$session.params.user.utn != $session.params.user.ani",
    "triggerFulfillment": {
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.mandatory_ss = \"true\"",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Laissez-moi envoyer un message texte avec plus de détails." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Let me send a quick text with more details." ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "targetPage": "SMS Phone Number Collection",
    "name": "dec694c9-4e7c-42fc-a95b-a6a7e1929796"
  } ]
}
