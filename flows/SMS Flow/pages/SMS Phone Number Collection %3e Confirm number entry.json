{
  "name": "47103cb7-4bc1-40ad-b993-bd9f0c80e00f",
  "displayName": "SMS Phone Number Collection \u003e Confirm number entry",
  "form": {
  
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page_temp",
      "value": "SMS Phone Number Collection \u003e Confirm number entry"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.phonenumvali_retrycnt = null OR $session.params.phonenumvali_retrycnt = 0",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eJust to confirm, is  \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e the correct number?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eJuste pour confirmer, est-ce que le  \u003csay-as interpret-as=\"telephone\"\u003e $session.params.sms_phone_number \u003c/say-as\u003e est le bon numéro?\u003c/speak\u003e" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.phonenumvali_retrycnt = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eIs  \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e the correct number?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Est-ce que le  \u003csay-as interpret-as=\"telephone\"\u003e $session.params.sms_phone_number \u003c/say-as\u003e est le bon numéro?\u003c/speak\u003e" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.phonenumvali_retrycnt = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eJust to confirm, is  \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e the correct number?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eJuste pour confirmer, est-ce que le  \u003csay-as interpret-as=\"telephone\"\u003e $session.params.sms_phone_number \u003c/say-as\u003e est le bon numéro?\u003c/speak\u003e" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.sms_number_confirmation_yes",
    "condition": "$session.params.confirm_num = \"1\" OR $session.params.confirm_num = \"3\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "confirm_num",
        "value": "2"
      } ]
    },
    "targetPage": "SMS Phone Number Collection \u003e confirmed",
    "name": "f8a1ca98-8be2-43c6-90c5-89f5458dcb11"
  }, {
    "intent": "small_talk.sms_number_confirmation_no",
    "condition": "$session.params.confirm_num = \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Let me try that again." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Laissez-moi réessayer." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "sms_phone_number",
        "value": null
      }, {
        "parameter": "phonenum_retrycnt",
        "value": null
      }, {
        "parameter": "confirm_num",
        "value": "2"
      }, {
        "parameter": "phonenumvali_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "SMS Phone Number Collection",
    "name": "c6f942e0-532a-429f-9600-82a769bff0ce"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
    
    },
    "targetPage": "End page",
    "name": "e6071d54-014d-4843-a219-17d2be0c9202"
  }, {
    "intent": "small_talk.sms_number_confirmation_no",
    "condition": "$session.params.confirm_num = \"3\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I am still not getting it. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Let me get you to a team member for more help. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je ne comprends toujours pas." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Vous devrez parler à un membre de l'équipe pour plus d'aide." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetPage": "Api Error Agent request",
    "name": "7772f18e-c1b0-45b8-b16d-ebb5c6941288"
  }, {
    "intent": "supplemental.choose_another_number",
    "condition": "$session.params.confirm_num = \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Let me try that again. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Laissez-moi réessayer." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "confirm_num",
        "value": "2"
      }, {
        "parameter": "sms_phone_number",
        "value": null
      }, {
        "parameter": "phonenum_retrycnt",
        "value": null
      }, {
        "parameter": "phonenumvali_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "SMS Phone Number Collection",
    "name": "a1c78f5e-e2c7-4718-bebb-81f5a64d2a8c"
  }, {
    "intent": "supplemental.choose_another_number",
    "condition": "$session.params.confirm_num = \"3\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I am still not getting it. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Let me get you to a team member for more help. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je ne comprends toujours pas." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Vous devrez parler à un membre de l'équipe pour plus d'aide." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetPage": "Api Error Agent request",
    "name": "c7035fc0-9b6e-48f4-885d-408c33625880"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.async_intent_list : $session.params.last_page",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_phone_number",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "40ae3054-9c7f-4145-882f-9b39e82670bc"
  }, {
    "condition": "$session.params.phonenumvali_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "phonenumvali_retrycnt",
        "value": 0
      } ]
    },
    "name": "80269afe-d57b-4e46-854c-d46e6001c9dd"
  }, {
    "condition": "$session.params.phonenumvali_retrycnt \u003e 2",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, I am having issues understanding. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I will need to get you to a team member for further support." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je n'ai pas compris." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Je vais devoir vous mettre en contact avec quelqu'un qui pourra vous aider." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetPage": "Api Error Agent request",
    "name": "49a4d377-b605-4aba-b65c-27590c026141"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "sys.no-match-1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "phonenumvali_retrycnt",
        "value": "$sys.func.ADD($session.params.phonenumvali_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.phonenumvali_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.phonenumvali_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "afe26369-18a7-414b-aa1b-3c6c672b8efa"
  }, {
    "targetPage": "Current Page",
    "event": "sys.no-input-1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "phonenumvali_retrycnt",
        "value": "$sys.func.ADD($session.params.phonenumvali_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.phonenumvali_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.phonenumvali_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "bb2b706d-37d5-4f64-8660-29aa69244c0c"
  } ]
}
