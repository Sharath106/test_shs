{
  "name": "e95d965b-9526-49c8-b716-fbe410ce44c5",
  "displayName": "Greeting",
  "form": {
  
  },
  "entryFulfillment": {
    "webhook": "Google Billing",
    "tag": "dfcx-google-billing-patch-voice",
    "setParameterActions": [ {
      "parameter": "broadcast",
      "value": "false"
    }, {
      "parameter": "area_code",
      "value": "$sys.func.GET_FIELD($sys.func.TO_PHONE_NUMBER($session.params.user.ani,\"CA\"),\"area-code\")"
    }, {
      "parameter": "dsfstart_retrycnt",
      "value": "$sys.func.IF(\"$session.params.dsfstart_retrycnt \u003e 2\", -1, $session.params.dsfstart_retrycnt)"
    }, {
      "parameter": "page_list",
      "value": "$sys.func.IF(\"$sys.func.GET($session.params.page_list, $sys.func.MINUS($sys.func.COUNT($session.params.page_list), 1)) :  Repeat\", $sys.func.APPEND($session.params.page_list, Done), $sys.func.APPEND($session.params.page_list, Greeting))"
    }, {
      "parameter": "app_first_pages",
      "value": "Accessories purchase,Apple Care plus,Available phones,Bring it Back amount,Bring It Back information,Bring it Back returns,Certified pre owned,Connection fee,Device Care Complete,Device trade in,Easy Payment Balance,Easy Payment info,New activation,New phone or BYOD Text,Price match,Renewal,Smart watches line Text,Smart watches Text,Store locator,Tablet purchase,TELUS EverSafe,APN Setting iphone vs android,Back Up Data iphone vs android,Change Notifications for Sound,Content Recovery iphone vs android,Device How to,Different types of blocks,eSIM information,Factory Reset iphone vs android,iMessage,Insert or Remove SIM Card,Mobile Internet or Hotspot Change WiFi Password Model,Mobile Klinik Device Checkup,Out of warranty repair,Passcode or PIN or Pattern,Purchase SIM card,Repair process,Smart Hub Province Check East SMS,Smart Hub Reset Password Model,Warranty lookup tool,WiFi or VOIP Calls,Wireless Home Phone,addons menu long distance,addons menu conferencing,addons menu call display,addons menu call forwarding,Block data Temporary,SMS issues,Smart hub issue,Visual Voicemail,Using your device abroad,Shop unlimited plans,Senior special plans,Roaming Coverage text,Remove a feature,Outbound call display,Other mobility plans,Multiple Line Activation,International text messaging,international calling from Canada,Favorite numbers,Cruise,Call Canada from abroad,Block data Ongoing,Billing while roaming,Apple Live VM,Activating StreamPlus,Battery issues,Browser crashing,Calling issues Mobile cant make or receive,CEIM Outage site Out of service area,Device will not start,MMS Issues,Roaming issues,Slow or frozen device,Smart Watch issues text,VM Forgot password,VM How to setup,Voicemail to text issues,VVM iPhone troubleshooting,WiFi Calling Issues,How to sign in or out,Account not approved,Authorized user,Forgot username,Link accounts,Role access,Self serve registration,Late payments 2,2factorauthentication,Alert Ready,Change Email Address,Cognitive Solutions,Data Limits,Data Notifications,Do not call list,Donate your phone,Health for Good,Hearing impaired,Internet for Good,Mobility for Good,Phone Found,Privacy Request Center,Referral Program,Secure Account,TELUS Future Friendly foundation,TELUS Giving Back,TELUS Rewards,TELUS Social Impact,touTV extra package,Vacation disconnect Suspend,vision impaired,Accidental roaming,Bill and balance,Bill due date,Billing cycle date,First bill explained,How to read your bill,Local calling,Mobility Fees,Payment History,Taxes,Text records,Usage overage,Order status,Reset password,Bill notifications or eBill,Coverage map,Reset TELUS Webmail Password,Smart Hub Activation,TELUS Email Address,Another Email Address,Smart Hub Province Check East,Call control,Rate plan change,Add Easy Roam,Everything Roaming,Stream plus,Change PIN,Enable or disable data,Activate SIM,Change Bill Address,Transfer of ownership,Bill reprint,Change Phone Number SMS,Current plan,How to view CSA or Contract,Porting In,View mobility bill,Find Account Number,Lower my bill,CAN US plans,Available promotions,Add a feature text,Add ons menu text,TELUS Online Security"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.skip_greeting_message = true"
      }, {
        "condition": "$session.params.nbs_lpc_waiver = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "In a sentence or two, what are you calling about today?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "En une phrase ou deux, pour quelle raison nous appelez-vous aujourd'hui?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.targetAccount.billingName.firstName = null AND $session.params.user_attempt_start = 0",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Hi. In a sentence or two, what are you calling about today?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Bonjour. En une phrase ou deux, pour quelle raison nous appelez-vous aujourd'hui?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.targetAccount.billingName.firstName != null AND $session.params.user_attempt_start = 0",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Hi. In a sentence or two, what are you calling about today?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Bonjour. En une phrase ou deux, pour quelle raison nous appelez-vous aujourd'hui?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.targetAccount.billingName.firstName = null AND $session.params.user_attempt_start = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Hi again. I can help you with all your Mobility services. How can I help you today?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Re-bonjour. Je peux vous aider avec tous vos services de mobilité. Comment puis-je vous aider aujourd'hui?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.targetAccount.billingName.firstName != null AND $session.params.user_attempt_start = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Hi again. I can help you with all your Mobility services. How can I help you today?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Re-bonjour. Je peux vous aider avec tous vos services de mobilité. Comment puis-je vous aider aujourd'hui?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.targetAccount.billingName.firstName = null AND $session.params.user_attempt_start = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "It looks like we're going in circles. Would you need help with something specific regarding mobility?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Je crois que nous tournons en rond. Souhaitez-vous recommencer ou avez-vous besoin d’aide pour quelque chose de spécifique?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.targetAccount.billingName.firstName != null AND $session.params.user_attempt_start = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "It looks like we're going in circles. Would you need help with something specific regarding mobility?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Je crois que nous tournons en rond. Souhaitez-vous recommencer ou avez-vous besoin d’aide pour quelque chose de spécifique?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ],
    "advancedSettings": {
      "playbackInterruptionSettings": {
      
      }
    }
  },
  "transitionRoutes": [ {
    "condition": "$session.params.targetPath = \"cc_pay_success\" OR $session.params.targetPath = \"cc_pay_back_end_failure\" OR $session.params.targetPath = \"cc_pay_card_rejected\" OR $session.params.targetPath = \"cc_pay_user_cancel\" OR $session.params.targetPath = \"cc_pay_user_error\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "payment_make"
      }, {
        "parameter": "skip_greeting_message",
        "value": null
      } ]
    },
    "targetFlow": "Payment",
    "name": "9c456992-c2f1-49e1-8a60-77959cff97ad"
  }, {
    "condition": "$session.params.targetPath = \"pap_success\" OR $session.params.targetPath = \"pap_back_end_failure\" OR $session.params.targetPath = \"pap_card_rejected\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "preauth_payment"
      }, {
        "parameter": "skip_greeting_message",
        "value": null
      } ]
    },
    "targetFlow": "Payment",
    "name": "e86876b9-8e90-4f2b-830d-07e815497993"
  }, {
    "condition": "$session.params.handoff_type = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "handoff_type",
        "value": "agent"
      } ]
    },
    "name": "447088ca-e92b-415a-ad5e-3b391dfb3899"
  }, {
    "condition": "$session.params.error_code != null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      } ]
    },
    "name": "240e26d8-4ffd-4291-9bca-3de73c00291a"
  }, {
    "condition": "$session.params.targetAccount.accountTags : epp OR $session.params.targetAccount.accountTags : EPP OR $session.params.routeDetails.productType : EPP",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "isEPP",
        "value": "true"
      } ]
    },
    "name": "bdbda78d-19f5-47bb-8fa6-25e658f7ef6e"
  }, {
    "condition": "$session.params.error_full_response : \"obfusactedExternalId\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      } ]
    },
    "targetPage": "Start Page",
    "name": "2d83f62e-5ebf-4a14-b1a9-aa83a18bdc53"
  }, {
    "condition": "($session.params.error_code != null OR $session.params.targetAccount = null) AND $session.params.dsfstart_retrycnt \u003c 1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "isEPP",
        "value": "false"
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "no_account",
        "value": "true"
      } ]
    },
    "targetPage": "Start Page",
    "name": "bfc25009-c739-437e-b08b-1015345766a5"
  }, {
    "condition": "$session.params.dsfstart_retrycnt \u003e 2 AND ($session.params.error_code != null OR $session.params.targetAccount = null)",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "isEPP",
        "value": "false"
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "no_account",
        "value": "true"
      } ]
    },
    "targetPage": "No match 2",
    "name": "91252ce2-bda9-4b4a-bf24-64142ff113dc"
  }, {
    "condition": "$session.params.dsfstart_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "isEPP",
        "value": "false"
      }, {
        "parameter": "error_retry",
        "value": null
      } ]
    },
    "targetPage": "No match 2",
    "name": "5595ab49-9033-47d2-88b4-374a254b12d6"
  }, {
    "condition": "true",
    "triggerFulfillment": {
    
    },
    "targetPage": "Start Page",
    "name": "76cce6c4-489a-4bb7-94ad-e3e53df74543"
  } ]
}
