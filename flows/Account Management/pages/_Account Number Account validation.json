{
  "name": "4e1b20fe-f0bc-48a2-ae2e-cbad5b6af57d",
  "displayName": "_Account Number Account validation",
  "form": {
  
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "_Account Number Account validation"
    } ]
  },
  "transitionRoutes": [ {
    "condition": "$session.params.subscriber_info[0].sub_status = null AND $session.params.invalid_number_counter = \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Ça ne semble toujours pas être un numéro associé à votre compte. Je peux vous mettre en contact avec un membre de l'équipe TELUS." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "This still doesn't look like a phone number that's associated to your account." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Let me get you to an agent for more assistance." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "f3690262-54d8-4aa3-bd5b-08f9087c1d0b"
  }, {
    "condition": "$session.params.subscriber_info[0].sub_status = null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Ce numéro ne semble pas associé à votre compte." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Si vous avez des question sur un numéro lié à un autre profil, veuillez vous déconnecter et essayer de nouveau." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "It looks like this number is not associated to your profile. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "If you're inquiring about a phone number from another profile, please log out and try again." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "phone_number",
        "value": null
      }, {
        "parameter": "invalid_number_counter",
        "value": "1"
      }, {
        "parameter": "phone_number_counter",
        "value": null
      }, {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      } ]
    },
    "targetPage": "_Account Number Start",
    "name": "530c4e09-5f38-4a8c-853a-7e7396af9900"
  }, {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "⏳ Veuillez patientez, je continue de recueillir vos informations." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "⏳ Please wait, I am still working on your request." ]
        },
        "languageCode": "en"
      } ],
      "webhook": "Account Identity",
      "tag": "selected_phone_number",
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": "1"
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ],
      "returnPartialResponses": true
    },
    "targetPage": "Current Page",
    "name": "e6db8d73-3394-4723-b6eb-1735df10ee9e"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Désolé, une erreur semble s'être produite." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Sorry, I am having issues with your request." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "targetPage": "Find Account Number",
    "name": "ed9b2c4b-81da-40ec-ad86-2fe2a91844d2"
  }, {
    "condition": "$session.params.subscriber_info[0].roleTxt != \"Account Owner\" AND $session.params.subscriber_info[0].roleTxt != \"Account Manager\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Afin de confirmer le numéro de compte, demandez au titulaire ou au gestionnaire du compte devra se connecter." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "In order to confirm the account number, make sure the account owner or manager logs in to get the information." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetPage": "End page",
    "name": "62c370c8-6e15-47bc-96ad-abb06fbdffcb"
  }, {
    "condition": "$session.params.subscriber_info[0].ban != null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Votre numéro de compte est le **$session.params.subscriber_info[0].ban**." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Your account number is **$session.params.subscriber_info[0].ban**." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "transaction",
        "value": "account number"
      } ]
    },
    "targetPage": "End page",
    "name": "16459e67-af01-4fcf-a5a0-503aca0886cd"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Je suis désolé, je ne semble pas trouver l'information." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I'm sorry, I can't seem to find the information." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetPage": "Find Account Number",
    "name": "2c607b16-b1e1-4ff4-8183-9aaba347fd30"
  } ]
}
