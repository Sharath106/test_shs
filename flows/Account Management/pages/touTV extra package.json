{
  "name": "b47bd3c9-3e6b-4dee-a6d1-b8c9ae438a16",
  "displayName": "touTV extra package",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_tou_tv_pcg",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send you a text with more information about ICI Radio Canada offer?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "Souhaitez-vous que j'envoie un message texte avec plus d'informations sur l'offre ICI TOU TV?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send you a text with more information about ICI Radio Canada offer?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je n'ai pas compris ça.", "Désolé, je n'ai pas compris.", "Je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous que j'envoie un message texte avec plus d'informations sur l'offre ICI TOU.TV?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "c30911c2-300c-47e3-9401-42e13d2a5f81"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "da2f4f74-b80a-49ff-8d84-f559a61be782"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "2abbbcbf-67b0-4ec0-9525-3849e9bb3d51"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send you a text with more information about ICI Radio Canada offer?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je n'ai pas compris ça.", "Désolé, je n'ai pas compris.", "Je n'ai pas compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous que j'envoie un message texte avec plus d'informations sur l'offre ICI TOU.TV?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "e4a772a5-a6c0-4c33-8960-7eed9aa05961"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "8a4450dd-0aca-41dd-96ed-12bd549e64f3"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "6d03174a-a69f-4287-a2b1-90249e81e519"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "touTV extra package"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "tou tv packages"
    }, {
      "parameter": "page_summaryfr",
      "value": "les forfaits Tou Tv"
    }, {
      "parameter": "last_page_summary",
      "value": "viewing tou tv packages"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "comprendre notre forfait ICI TOU.TV Extra"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\") AND $session.params.app_first_poc = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "To get information on the ICI TOU.TV Extra Package, you must use the TELUS website for the fastest resolution. It's easy to use and allows you to avoid waiting on the line." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "I am sending you a link to the website now." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you still need help, you can request a priority call back from the virtual assistant in your My TELUS account." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour de l'information sur le forfait ICI TOU.TV Extra, vous devez utiliser le site Web de TELUS pour obtenir la résolution la plus rapide. Il est simple à utiliser et vous permet d'éviter d'attendre en ligne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Je vous envoie maintenant un lien vers le site Web." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez encore besoin d'aide, vous pouvez demander un rappel prioritaire à l'assistant virtuel dans votre compte Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "This offer is available to Quebec residents only." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Through a partnership with ICI Radio-Canada, TELUS customers are eligible to get hours of free additional content with the new ICI TOU.TV Extra Package." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To be eligible for the exclusive offer, customers must be subscribed to at least one TELUS service." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Cette offre est disponible pour les résidents du Québec seulement." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Grâce à un partenariat avec Radio-Canada, les clients consommateurs de TELUS peuvent obtenir des heures de contenu additionnel gratuit avec le service ICI TOU TV." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour être admissible, vous devez être abonné à au moins un service TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319008F"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900N1"
      }, {
        "parameter": "toutvpcg_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_tou_tv_pcg",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "f07dcf96-c7fc-4696-868c-db1c05d90f03"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "toutvpcg_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_tou_tv_pcg",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319008F"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900N1"
      } ]
    },
    "targetPage": "End page",
    "name": "135d17f7-655f-4731-9e24-0bceabe88c2f"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "toutvpcg_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_tou_tv_pcg",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN7319008F"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900N1"
      } ]
    },
    "targetPage": "End page",
    "name": "4ed09df7-eb1c-4f51-9020-746c1854b4aa"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sure, I'm happy to get you to a live agent." ]
        },
        "languageCode": "en"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "3413c98b-9de4-4685-8a16-9848a2655e22"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319008F"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900N1"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "a191d627-4c78-447b-ab15-6619d20e64d8"
  }, {
    "condition": "$session.params.dtmf_tou_tv_pcg = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN7319008F"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900N1"
      }, {
        "parameter": "toutvpcg_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_tou_tv_pcg",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "58b3e2f5-61e9-4d5e-b806-babde99e1919"
  }, {
    "condition": "$session.params.dtmf_tou_tv_pcg = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay, let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi demander à quelqu'un de vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "toutvpcg_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_tou_tv_pcg",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "3756f9fa-c2ac-4d1a-b725-bc098dc3d106"
  }, {
    "condition": "$session.params.dtmf_tou_tv_pcg = 1 OR $session.params.dtmf_tou_tv_pcg = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_tou_tv_pcg",
        "value": null
      }, {
        "parameter": "toutvpcg_retrycnt",
        "value": "$sys.func.ADD($session.params.toutvpcg_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "d7ba6f61-42bc-40d2-8aa2-bb6873343896"
  } ]
}
