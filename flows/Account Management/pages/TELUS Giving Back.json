{
  "name": "2b40b139-66d2-4308-bc9f-685fa6e6e7d1",
  "displayName": "TELUS Giving Back",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_telus_giving_back",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send a link with more information on this to your phone now?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "Aimeriez-vous que j'envoie un lien à votre téléphone avec plus d'informations?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text for more information?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un lien à votre téléphone avec plus d'informations?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "4f9d1ea7-dabe-482c-ba37-615fa21aa0b8"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "254abe7c-a948-45e0-8423-fbadf3612b3d"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "77ff4683-f136-4241-91dd-c268ae66fffd"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry,  I didn't understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text for more information?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un lien à votre téléphone avec plus d'informations?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "829a60c6-4a2a-4ed9-98fa-829dc18b79a7"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "0be98a3c-3a02-408f-ac08-a9e462a1a924"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "a11f6009-6ff5-4342-a47a-603e11add8db"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "messages": [ {
      "text": {
        "text": [ "De bonnes choses se passent ici!" ]
      },
      "languageCode": "fr"
    }, {
      "text": {
        "text": [ "Nous redonnons pour aider les communautés à prospérer, en soutenant plus de 4000 organismes communautaires à travers le pays ainsi qu'en contribuant un million d'heures de bénévolat chaque année." ]
      },
      "languageCode": "fr"
    }, {
      "text": {
        "text": [ "Lorsque vous êtes chez TELUS, vous faites partie du réseau qui redonne." ]
      },
      "languageCode": "fr"
    }, {
      "payload": {
        "richContent": [ [ {
          "actionLink": "telus.com/fr/social-impact/giving-back?INTCMP=VAN_givesback?INTCMP=Tcom_VirtualAssistant\u0026linktype=virtual_assistant",
          "title": "Découvrez en plus ici",
          "type": "info"
        } ] ]
      },
      "languageCode": "fr"
    } ],
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "TELUS Giving Back"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "how we are giving back"
    }, {
      "parameter": "page_summaryfr",
      "value": "la façon dont nous redonnons"
    }, {
      "parameter": "last_page_summary",
      "value": "how we are giving back"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "comprendre sur la façon dont nous redonnons"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\") AND $session.params.app_first_poc = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "To get information on how we are giving back, you must use the TELUS website for the fastest resolution. It's easy to use and allows you to avoid waiting on the line." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "I am sending you a link to the website now." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you still need help, you can request a priority call back from the virtual assistant in your My TELUS account." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour de l'information sur la façon dont nous redonnons, vous devez utiliser le site Web de TELUS pour obtenir la résolution la plus rapide. Il est simple à utiliser et vous permet d'éviter d'attendre en ligne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Je vous envoie maintenant un lien vers le site Web." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez encore besoin d'aide, vous pouvez demander un rappel prioritaire à l'assistant virtuel dans votre compte Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "When you are with TELUS, you are part of a network of giving." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "We’re giving back to help communities thrive, by supporting over four thousand community organizations across the country, and volunteering over one million hours every year." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Lorsque vous êtes avec TELUS, vous faites parti d'un réseau qui donne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Nous redonnons pour aider les communautés à prospérer, en soutenant plus de quatre mille organismes communautaires à travers le pays ainsi qu'en contribuant un million d'heures de bénévolat chaque année." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900FA"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900U4"
      }, {
        "parameter": "telusgivingback_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_telus_giving_back",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "16fd7014-743a-401e-83f6-69483b77ba9a"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "telusgivingback_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_telus_giving_back",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900FA"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900U4"
      } ]
    },
    "targetPage": "End page",
    "name": "fdba202d-d3f2-40c5-a41d-5891085f5f31"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "telusgivingback_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_telus_giving_back",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900FA"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900U4"
      } ]
    },
    "targetPage": "End page",
    "name": "7da794b4-e2b8-442b-bea0-0968a26bb8c5"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900FA"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900U4"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "878e220c-2d8d-4924-990f-580dc1fe6cc5"
  }, {
    "condition": "$session.params.dtmf_telus_giving_back = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "telusgivingback_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_telus_giving_back",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "281cc090-0504-4d3b-8010-a93b7cb0cd9f"
  }, {
    "condition": "$session.params.dtmf_telus_giving_back = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900FA"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900U4"
      }, {
        "parameter": "telusgivingback_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_telus_giving_back",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "2c27e855-eb19-49d4-a704-0aecf64ae856"
  }, {
    "condition": "$session.params.dtmf_telus_giving_back = 1 OR $session.params.dtmf_telus_giving_back = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_telus_giving_back",
        "value": null
      }, {
        "parameter": "telusgivingback_retrycnt",
        "value": "$sys.func.ADD($session.params.telusgivingback_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "e70cfbc4-5146-43ed-82ac-f89d2b56503d"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "telusgivingback_retrycnt",
        "value": "$sys.func.ADD($session.params.telusgivingback_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.telusgivingback_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.telusgivingback_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "c35dbf75-7ba2-42aa-b9bb-3b30cc2013bc"
  } ]
}
