{
  "name": "58122dc5-5164-470f-9942-63ed98de229f",
  "displayName": "Remove a line",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_remove_a_line",
      "required": true,
      "entityType": "@dtmf-menu-1-2-0",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Voulez-vous transférer la ligne dans un compte différent ou la annuler?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Are you looking to simply move the line to a different account, or cancel the line completely?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "508efe01-45b7-42c5-8ae7-6a0e6e9f254f"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour transférer la ligne dans un autre compte, dites transfert ou faites le 1. Pour la annuler, dites annuler ou faites le 2. Pour qu'un membre de l'équipe vous aide, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To move the line on to a different account, say transfer or press 1, to cancel it, say cancel or press 2, to connect with a team member, say team member or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "e34c1df1-5ceb-4d61-ba3e-9c526edca93d"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "1b346419-1886-4ae3-9c9e-c1f0dd07977f"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Voulez-vous transférer la ligne dans un compte différent ou la annuler?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Are you looking to simply move the line to a different account, or cancel the line completely?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "c7118faa-e5db-4699-9608-864c754a67e4"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour transférer la ligne dans un autre compte, dites transfert ou faites le 1. Pour la annuler, dites annuler ou faites le 2. Pour qu'un membre de l'équipe vous aide, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To move the line on to a different account, say transfer or press 1, to cancel it, say cancel or press 2, to connect with a team member, say team member or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "0a7f813e-299c-4c0c-9d72-0668ca800433"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "fab120fd-421f-4d8a-8c96-3a21f249389f"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Remove a line"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.removealine_retrycnt = null OR $session.params.removealine_retrycnt = 0",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Afin de confirmer, voulez-vous transférer la ligne dans un compte différent ou la annuler?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Just to clarify, Would you like to move the line to it's own account, or cancel the line completely?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.removealine_retrycnt = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Voulez-vous transférer la ligne dans un compte différent ou la annuler?" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Are you looking to simply move the line to a different or same account, or cancel the line completely?" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.removealine_retrycnt = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Pour transférer la ligne dans un autre compte, dites transfert ou faites le 1. Pour la annuler, dites annuler ou faites le 2. Pour qu'un membre de l'équipe vous aide, dites membre de l'équipe ou faites le 0." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To transfer the line to a different account, say transfer or press 1, to cancel the line, say cancel or press 2, to connect with a team member, say team member or press 0." ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "head_intent.account_close",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetPage": "Cancel account",
    "name": "58e509c4-489f-40ca-97e3-12b866321647"
  }, {
    "intent": "head_intent.account_transfer_ownership",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "town"
      }, {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetFlow": "Account Management",
    "name": "8e221388-06b7-40dc-ad88-e0d7b43ef071"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "55e99a4a-2dc6-4197-aa3b-fa26731cabb9"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "66c7138a-e1d6-4b9d-b60d-883b8f0cfc91"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "c070b3ba-581b-4eb3-81d2-776511e18303"
  }, {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Afin de confirmer, voulez-vous transférer la ligne dans un compte différent ou la annuler?\n" ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Just to clarify, Would you like to move the line to it's own account, or cancel the line completely?" ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "5fef795f-990e-4d41-affd-7f8b258748fc"
  }, {
    "condition": "$session.params.dtmf_remove_a_line = \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "town"
      }, {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetFlow": "Account Management",
    "name": "a4e35c1d-5afe-47ce-af47-60e9c0ad2d24"
  }, {
    "condition": "$session.params.dtmf_remove_a_line = \"2\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetPage": "Cancel account",
    "name": "2351aeae-2d0f-4d6c-838f-2f220651744b"
  }, {
    "condition": "$session.params.dtmf_remove_a_line = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Okay let me get someone to help you." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_remove_a_line",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "c212b46b-3b2f-4412-899d-cd9cbe4bb07d"
  }, {
    "condition": "$session.params.removealine_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": 0
      } ]
    },
    "name": "535e6923-d299-454a-9328-e0b26974d4b7"
  }, {
    "condition": "$session.params.removealine_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "60a1d0bd-43da-4969-b789-6a2c0402897b"
  }, {
    "condition": "$session.params.dtmf_remove_a_line = 3 OR $session.params.dtmf_remove_a_line = 9",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_remove_a_line",
        "value": null
      }, {
        "parameter": "removealine_retrycnt",
        "value": "$sys.func.ADD($session.params.removealine_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "3fd0944e-d0a1-46bc-8c64-bb41269c2d4a"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "removealine_retrycnt",
        "value": "$sys.func.ADD($session.params.removealine_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.removealine_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn’t understand that." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$session.params.removealine_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "name": "32c059d3-64db-4f0a-9561-f5ffacebce9a"
  } ]
}
