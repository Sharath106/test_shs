{
  "name": "16f28f14-b12e-4e8e-8218-373a659ce4a3",
  "displayName": "Confirm SMS Number",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_yesno",
      "required": true,
      "entityType": "@dtmf-menu-1-2",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ " \u003cspeak\u003eCan I send your text message to \u003cprosody rate = \"65%\"\u003e \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e\u003c/prosody\u003e ?\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "78643fd3-bb3d-411b-9fa8-edba84e65a0e"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ " \u003cspeak\u003eCan I send your text message to \u003cprosody rate = \"65%\"\u003e \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e\u003c/prosody\u003e ?\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "5107366a-8bfd-4e24-8327-da1b59c669de"
        }, {
          "targetPage": "Return To Start",
          "event": "sys.no-input-default",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I'm having issues understanding." ]
              },
              "languageCode": "en"
            } ],
            "setParameterActions": [ {
              "parameter": "return",
              "value": "Y"
            } ]
          },
          "name": "5f9b2cd3-a344-4d49-ad27-487421a8d346"
        }, {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ " \u003cspeak\u003eCan I send your text message to \u003cprosody rate = \"65%\"\u003e \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e\u003c/prosody\u003e ?\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "b0476e55-716a-4f8a-b353-c475b0555f72"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ " \u003cspeak\u003eCan I send your text message to \u003cprosody rate = \"65%\"\u003e \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e\u003c/prosody\u003e ?\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "c81a82e0-b21f-4fdb-b8c1-20371c63b3fc"
        }, {
          "targetPage": "Return To Start",
          "event": "sys.no-match-default",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I'm having issues understanding." ]
              },
              "languageCode": "en"
            } ],
            "setParameterActions": [ {
              "parameter": "return",
              "value": "Y"
            } ]
          },
          "name": "9e3815bc-60cd-46fb-be7d-a78316fa9568"
        }, {
          "event": "sys.long-utterance",
          "triggerFulfillment": {
          
          },
          "name": "c9dfc37f-86b8-4f55-84d2-ac2bd1067c45"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false
        }
      }
    } ]
  },
  "entryFulfillment": {
    "messages": [ {
      "text": {
        "text": [ " \u003cspeak\u003eJust to confirm, can I send your text message to \u003cprosody rate = \"65%\"\u003e \u003csay-as interpret-as=\"telephone\" google:style='zero-as-zero'\u003e $session.params.sms_phone_number \u003c/say-as\u003e\u003c/prosody\u003e ?\u003c/speak\u003e" ]
      },
      "languageCode": "en"
    }, {
      "text": {
        "text": [ "\u003cspeak\u003ePour des fin de confirmation, puis-je envoyer votre SMS au  \u003csay-as interpret-as=\"telephone\"\u003e $session.params.sms_phone_number \u003c/say-as\u003e?\u003c/speak\u003e" ]
      },
      "languageCode": "fr-ca"
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Return To Start",
    "name": "b8aad351-501c-41f6-a1e8-63192544afa4"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.async_intent_list : $session.params.last_page AND ($session.params.async_agent_count = \"1\" OR $session.params.async_low_ss_prop = \"true\")",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "agent_confirm_sms_number",
        "value": "true"
      }, {
        "parameter": "async_sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "async_agent_count",
        "value": "2"
      } ]
    },
    "targetPage": "Route -\u003e Universal Handoff",
    "name": "26ffcf87-0491-4908-87cd-408b770b0331"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "condition": "$session.params.async_intent_list : $session.params.last_page AND ($session.params.async_agent_count = \"2\" OR $session.params.async_low_ss_prop = \"true\")",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "handoff_type",
        "value": "agent"
      }, {
        "parameter": "async_sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "async_agent_count",
        "value": "3"
      } ]
    },
    "targetPage": "Route -\u003e Universal Handoff",
    "name": "419e49f1-1bb4-45f0-8694-153d99cc43d6"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay, let me get someone to help you." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "agent_confirm_sms_number",
        "value": "true"
      } ]
    },
    "targetPage": "Route -\u003e Universal Handoff",
    "name": "18f78647-f558-4280-92eb-fd923744dfae"
  }, {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
    
    },
    "targetPage": "Check Collected TN",
    "name": "33c7e7ef-93a9-4a4a-a769-a88db54acb6f"
  }, {
    "intent": "small_talk.confirmation_no",
    "condition": "$session.params.french_dtmf_only = true AND $session.params.conversation.languageAbv = \"fr\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_phone_number",
        "value": null
      } ]
    },
    "targetPage": "Collect SMS Number French DTMF",
    "name": "20026d72-1393-4836-9fdc-c2e2fa076d62"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_phone_number",
        "value": null
      } ]
    },
    "targetPage": "Collect SMS Number",
    "name": "727be50d-7d8a-439c-ae7e-e35e90871540"
  }, {
    "condition": "$session.params.dtmf_yesno = \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "dtmf_yesno",
        "value": null
      } ]
    },
    "targetPage": "Check Collected TN",
    "name": "760e0b8b-7911-4e62-aafa-6bd1cc3f0f5d"
  }, {
    "condition": "$session.params.dtmf_yesno = \"2\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_phone_number",
        "value": null
      }, {
        "parameter": "dtmf_yesno",
        "value": null
      } ]
    },
    "targetPage": "Collect SMS Number",
    "name": "8a9619fc-5fad-4af2-9d1f-22e26007f1d3"
  }, {
    "condition": "$session.params.french_dtmf_only = true AND $session.params.conversation.languageAbv = \"fr\" AND $session.params.dtmf_yesno = \"2\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_phone_number",
        "value": null
      }, {
        "parameter": "dtmf_yesno",
        "value": null
      } ]
    },
    "targetPage": "Collect SMS Number French DTMF",
    "name": "2652e008-89ed-4980-a7fb-4b991250b4eb"
  } ],
  "transitionRouteGroups": [ "Repeat1" ]
}
