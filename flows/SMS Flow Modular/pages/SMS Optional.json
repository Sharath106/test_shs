{
  "name": "c3699e1f-b497-4e70-9000-7f13bc806766",
  "displayName": "SMS Optional",
  "form": {
    "parameters": [ {
      "displayName": "sms_confirmation",
      "required": true,
      "entityType": "@sms_confirmation",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "$session.params.offer_script" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "$session.params.offer_script" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Please confirm, would you like me to send you an SMS?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "1a39dea2-e0fd-41e4-9c64-201a81a10708"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive an SMS, press one.  If you don't want an SMS, press two." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Afin de recevoir un SMS, appuyez sur le 1, Si vous ne voulez pas de SMS appuyez sur le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "772f504d-ce6a-436c-9cbb-61452d6d243a"
        }, {
          "targetPage": "Return To Start",
          "event": "sys.no-input-default",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I still didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je n'ai toujours pas compris" ]
              },
              "languageCode": "fr-ca"
            } ],
            "setParameterActions": [ {
              "parameter": "return",
              "value": "Y"
            } ]
          },
          "name": "e7ff21d6-1a11-43d1-9d24-4f276aa220c7"
        }, {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Please confirm, would you like me to send you an SMS?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "da2664d1-03c2-41f0-8963-61802727e553"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive an SMS, press one.  If you don't want an SMS, press two." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Afin de recevoir un SMS, appuyez sur le 1, Si vous ne voulez pas de SMS appuyez sur le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "d3898e9f-b342-4b5c-9c15-72de62e69743"
        }, {
          "targetPage": "Return To Start",
          "event": "sys.no-match-default",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je n'ai toujours pas compris" ]
              },
              "languageCode": "fr-ca"
            } ],
            "setParameterActions": [ {
              "parameter": "return",
              "value": "Y"
            } ]
          },
          "name": "fc8c67ce-38ca-4927-a9ef-bf31d89e3d6d"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "sms_flow_status",
      "value": "offered"
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "offered"
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
          "allowPlaybackInterruption": true
        }
      }
    },
    "targetPage": "SMS Accepted",
    "name": "1a2a3004-7066-4dd4-8393-c8b37c51ef8a"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "sms_offer_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Return To Start",
    "name": "062963b5-aed9-4890-a7ea-91f93a4b39cd"
  }, {
    "intent": "head_intent.live_agent_hand_off",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laisse-moi demander à quelqu'un de t'aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "handoff_type",
        "value": "agent"
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Route -\u003e Universal Handoff",
    "name": "a225658a-7751-4095-83be-d67c515e1470"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "return",
        "value": "Y"
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Return To Start",
    "name": "3e48d1a4-b468-453f-9aca-a5cb097fd7e4"
  }, {
    "condition": "$session.params.sms_confirmation = \"no\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "Return To Start",
    "name": "fceb6087-2133-428b-9296-c259054d5e18"
  }, {
    "condition": "$session.params.sms_confirmation = \"yes\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "offered"
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
          "allowPlaybackInterruption": true
        }
      }
    },
    "targetPage": "SMS Accepted",
    "name": "423bf9d9-f304-4bfc-a783-7085bf3a946e"
  } ],
  "transitionRouteGroups": [ "Repeat1" ]
}
