{
  "name": "26bf8c00-5d2d-4f30-8129-0534ac316818",
  "displayName": "Payment issues",
  "form": {
    "parameters": [ {
      "displayName": "payment_issues",
      "required": true,
      "entityType": "@payment-issues",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Are you experiencing issues with credit card, pre-authorized, late payments or online banking payments?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Vous rencontrez des problèmes avec les paiements par carte de crédit, préautorisés ou compte bancaire en ligne?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "bc3f7af4-d098-46bd-afee-5c6e9d6958e0"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "If you're experiencing issues, say credit card or press 1, pre-authorized, missed and late payments or press 2, online banking or press 3." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Si vous rencontrez des problèmes, dites carte de crédit ou faites le 1. Paiements préautorisés ou faites le 2. Compte bancaire en ligne ou faites le 3." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "e91bb7c8-fdaa-4d2f-b0f3-2117ae53ca51"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "ad846468-c349-4c4a-a9b5-868cd0f08ce6"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Are you experiencing issues with credit card, pre-authorized, late payments or online banking payments?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Vous rencontrez des problèmes avec les paiements par carte de crédit, préautorisés ou compte bancaire en ligne?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "02a2b207-08a3-4ebd-9cbd-9e3fd03fe903"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "If you're experiencing issues, say credit card or press 1, pre-authorized, missed and late payments or press 2, online banking or press 3." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Si vous rencontrez des problèmes, dites carte de crédit ou faites le 1. Paiements préautorisés ou faites le 2. Compte bancaire en ligne ou faites le 3." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "27d8d506-b662-4d37-9cb4-b3419f081fc9"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "bc34512b-4f80-4581-8876-660bbfd48d98"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Payment issues"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.paymentissues_retrycnt = null OR $session.params.paymentissues_retrycnt = 0) AND $session.params.payment_issues = null",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "I'm sorry to hear that you're having payment issues." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Just to make sure, what kind of payment issues are you having?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Désolé d'apprendre que vous avez des difficultés avec vos paiements." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour confirmer, quelle sorte de problème de paiement avez-vous?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.paymentissues_retrycnt = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Are you experiencing issues with credit card, pre-authorized or online banking payments?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Vous rencontrez des problèmes avec les paiements par carte de crédit, préautorisés ou compte bancaire en ligne?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.paymentissues_retrycnt = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "If you're experiencing issues, say credit card or press 1, for pre-authorized or missed and late payments press 2, online banking or press 3." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous rencontrez des problèmes, dites carte de crédit ou faites le 1. Paiements préautorisés ou faites le 2. Compte bancaire en ligne ou faites le 3." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "head_intent.find_account_number",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "account_number"
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": null
      }, {
        "parameter": "payment_issues",
        "value": null
      } ]
    },
    "targetFlow": "Account Management",
    "name": "e00aac1a-4ace-4dd9-b36b-45b3a1b89bb7"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": null
      }, {
        "parameter": "payment_issues",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "372eb107-7a60-4b6a-bb4e-04362f88a310"
  }, {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "If you're experiencing issues, say credit card or press 1, pre-authorized, missed and late payments or press 2, online banking or press 3." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Si vous rencontrez des problèmes, dites carte de crédit ou faites le 1. Paiements préautorisés ou faites le 2. Compte bancaire en ligne ou faites le 3." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "454eef62-6c3c-47a0-b258-7cd6d308fa79"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": null
      }, {
        "parameter": "payment_issues",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "34756611-cc23-4cb0-856b-e80143319bcb"
  }, {
    "condition": "$session.params.payment_issues = \"credit card\" OR $session.params.payment_issues = \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": null
      }, {
        "parameter": "payment_issues",
        "value": null
      } ]
    },
    "targetPage": "Credit card issues",
    "name": "0dd4319a-fcbe-4cb9-b755-3557357095bc"
  }, {
    "condition": "$session.params.payment_issues = \"pre-authorized\" OR $session.params.payment_issues = \"missed payments\" OR $session.params.payment_issues = \"late payments\" OR $session.params.payment_issues = \"2\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Les paiements préautorisés par compte bancaire, carte de crédit ou carte Visa Débit sont traités environ 15 jours après la date de facturation." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Après la configuration des paiements préautorisés , il est possible qu’ils n’entrent en vigueur qu’après un cycle de facturation entier et nous recommandons un paiement unique pour éviter les frais de retard." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Si vous avez remarqué des frais de retard apres plus d'un cycle de facturation entier après avoir configuré les paiements préautorisés, assurez-vous d'avoir mis à jour votre carte de crédit." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": null
      }, {
        "parameter": "payment_issues",
        "value": null
      } ]
    },
    "targetPage": "Pre Auth Payment issues",
    "name": "90d6ec6d-0133-403e-b2e4-5e4c0669e457"
  }, {
    "condition": "$session.params.payment_issues = \"online banking\" OR $session.params.payment_issues = \"3\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "You should only need the right payee and your account number to proceed with online banking." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "If you're getting an error when trying to pay with your online bank account, contact your bank for more assistance. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Si vous avez de la difficulté à faire un paiement avec votre compte bancaire en ligne, veuillez contacter votre institution bancaire." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Si vous avez le bon numéro de compte et le bon bénéficiaire, il ne devrait pas y avoir de problème." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": null
      }, {
        "parameter": "payment_issues",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "98f61142-18c7-4ad0-a802-d0dd4b4fc569"
  }, {
    "condition": "$session.params.paymentissues_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": 0
      } ]
    },
    "name": "6abfcb06-9b15-4b70-babd-639fda02260d"
  }, {
    "condition": "$session.params.paymentissues_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "bdc45417-c3d8-4ad7-ba97-1104976dc597"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "paymentissues_retrycnt",
        "value": "$sys.func.ADD($session.params.paymentissues_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.paymentissues_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.paymentissues_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "ce1a6588-f473-4090-9ad7-7d2ef718b5ed"
  } ],
  "transitionRouteGroups": [ "Supp_route_payment" ]
}
