{
  "name": "709f5f96-f342-4c5e-aa2d-549bb75c7bcf",
  "displayName": "_RaP 2 Validate Account",
  "form": {
  
  },
  "entryFulfillment": {
    "webhook": "Rate Plan Change",
    "tag": "rate_plan_change_initial",
    "setParameterActions": [ {
      "parameter": "ban",
      "value": "$session.params.user.ban"
    }, {
      "parameter": "last_page",
      "value": "_RaP 2 Validate Account"
    }, {
      "parameter": "phone_number",
      "value": "$session.params.user.ani"
    } ],
    "advancedSettings": {
      "playbackInterruptionSettings": {
      
      }
    }
  },
  "transitionRoutes": [ {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Please wait, I am still working on your request. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Veuillez patienter, je continue de recueillir vos informations." ]
        },
        "languageCode": "fr-ca"
      } ],
      "webhook": "Rate Plan Change",
      "tag": "rate_plan_change_initial",
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": "1"
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ],
      "returnPartialResponses": true
    },
    "name": "2dbca09c-9dbd-43a9-8d2b-5deb33fc1374"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "targetPage": "Webhook Error Redirect",
    "name": "d27c51cb-0df0-4f90-9de1-c421dc5e0f39"
  }, {
    "condition": "$session.params.suspend_reason = \"VADR\" OR $session.params.suspend_reason = \"CVAD\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Your account is on vacation disconnect." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I'll have to get you over to a team member to restore service, before we can report a payment." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Votre compte est actuellement en suspension temporaire." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Avant de signaler un paiement, nous devons rétablir votre service. Je vais vous mettre en communication avec l'équipe du soutien pour mieux vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "selfserve_mandatory",
        "value": "false"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "2fa9dcfe-20b5-4477-a1c5-22a354676c23"
  }, {
    "condition": "$session.params.isTrustedUser = \"true\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "_RaP 3 Fetch Credit Class",
    "name": "c89c53fc-3727-464a-8ea3-f45f52e59ad3"
  }, {
    "condition": "($session.params.isTrustedUser = \"false\" OR $session.params.isTrustedUser = null) AND $session.params.user.auth_status != \"true\"",
    "triggerFulfillment": {
    
    },
    "targetFlow": "Account Identification",
    "name": "44fd16a3-2e29-487e-ac53-aeb2b18a155e"
  }, {
    "condition": "($session.params.isTrustedUser = \"false\" OR $session.params.isTrustedUser = null) AND $session.params.user.auth_status = \"true\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "_RaP 3 Fetch Credit Class",
    "name": "be314139-4f6a-4029-9c82-082390bba6ab"
  } ],
  "eventHandlers": [ {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "isWebhookError",
        "value": true
      } ]
    },
    "name": "d31c538d-8617-46b9-87d3-d87968eacbbb"
  }, {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error.timeout",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "isWebhookError",
        "value": true
      } ]
    },
    "name": "b618c326-7175-44d5-8e04-66d4e096fb8d"
  } ]
}
