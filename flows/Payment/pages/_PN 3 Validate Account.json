{
  "name": "e641d65b-b3d2-4b75-a918-749ff8eb523c",
  "displayName": "_PN 3 Validate Account",
  "form": {
  
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "_PN 3 Validate Account"
    } ]
  },
  "transitionRoutes": [ {
    "condition": "$session.params.route = \"pay_otheracct\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "lookupType",
        "value": "tn"
      }, {
        "parameter": "lookupNumber",
        "value": "$session.params.another_account_pn"
      }, {
        "parameter": "environment",
        "value": "$sys.func.IF($session.params.conversation.genxStream= \"qa\", \"it02\", \"it04\")"
      }, {
        "parameter": "entryBrand",
        "value": "$session.params.routeDetails.brand"
      } ]
    },
    "name": "ce16531b-293a-4d11-81cc-a6cb9494733a",
    "description": "Setting parameter for user identity API call"
  }, {
    "condition": "$session.params.route = \"pay_otheracct\"",
    "triggerFulfillment": {
      "webhook": "Account Identity VC",
      "tag": "search_customer"
    },
    "name": "cbb926b3-1829-4f44-bed4-06190a7a9e64"
  }, {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\" AND $session.params.route = \"pay_otheracct\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Please wait, I'm still working on your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Veuillez patienter, je suis en train de traiter votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "webhook": "Account Identity VC",
      "tag": "search_customer",
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": "1"
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      },
      "returnPartialResponses": true
    },
    "name": "f5116b9c-b9c5-4af4-9974-b638b2f524a2"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "targetPage": "Webhook Error Redirect",
    "name": "fea6461d-c738-4caa-97a5-419947f303f3"
  }, {
    "condition": "true",
    "triggerFulfillment": {
    
    },
    "targetPage": "_PN 4 User Identity",
    "name": "b67abf7a-e986-478c-a14d-02fd5f6eb626"
  } ],
  "eventHandlers": [ {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error",
    "triggerFulfillment": {
    
    },
    "name": "94968196-c2a8-4597-8335-de81fee7c7f6"
  }, {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error.timeout",
    "triggerFulfillment": {
    
    },
    "name": "db444df3-ec0e-4ec2-babe-51c909d1e7d3"
  } ]
}
