{
  "name": "f785aa56-12d1-45bb-a340-ec8cf1ec6d57",
  "displayName": "Late payments",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_late_payments",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send a text message with more information about late payment charges to your phone now?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about late payment charges to your phone now?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations sur les frais de retard?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "b4f5ef4b-e15f-46e8-84c4-1dc3a8610526"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "ec147282-88cc-491f-9ec9-0baf606589eb"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "a7746792-518e-4ad5-8821-b31125069210"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about late payment charges to your phone now?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un message texte avec plus d'informations sur les frais de retard?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "d8310fd4-36ed-401b-81ab-43996fafdc81"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "ea588bba-a3ef-41aa-91ee-1dfaf79ee787"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "35345fa3-72f0-4150-b1fb-032181e60bc7"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Late payments"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "late payment fees"
    }, {
      "parameter": "page_summaryfr",
      "value": "les frais de retard de paiement"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.repeat_counter = null OR $session.params.repeat_counter = 3) AND $session.params.lpc-forgiveness = null",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Late charges are applied to any overdue balance starting one calendar day after the date shown on your invoice." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If a bill is delayed due to an issue with a TELUS process, your account is protected from being charged a late payment fee." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "A good way to avoid late payment charges is to sign-up for Pre-authorized payments." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Les frais de retard s’appliquent à votre solde en souffrance à compter du lendemain de la date indiquée sur votre facture." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si une facture est retardée en raison d'un problème avec un processus de TELUS, votre compte est protégé contre les frais de retard." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Un bon moyen d’éviter les frais de retard est de vous inscrire aux paiements préautorisés." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "($session.params.repeat_counter = 1 OR $session.params.repeat_counter = 4) AND $session.params.lpc-forgiveness = null",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Late charges are applied to any outstanding balance starting one calendar day after the invoice date." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If a delay in billing is caused by an issue with TELUS' process, you will not be charged a late payment fee." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "A good way to avoid late payment charges is to sign-up for Pre-authorized payments." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Des frais de retard sont appliqués à tout solde impayé à partir d'un jour civil après la date de facturation." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si un retard dans la facturation est causé par un problème avec le processus de TELUS, aucun frais de retard ne vous sera facturé." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Un bon moyen d’éviter les frais de retard est de vous inscrire aux paiements préautorisés." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "($session.params.repeat_counter = 2 OR $session.params.repeat_counter = 5) AND $session.params.lpc-forgiveness = null",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Any overdue balance will incur late charges starting one calendar day after the invoice date. However, if a delay in billing is caused by an issue with TELUS' process, you will not be charged a late payment fee." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "A good way to avoid late payment charges is to sign-up for Pre-authorized payments." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Tout solde impayé entraînera des frais de retard à partir d'un jour civil après la date de facturation." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Cependant, si un retard dans la facturation est causé par un problème avec le processus de TELUS, aucun frais de retard ne vous sera facturé." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Un bon moyen d’éviter les frais de retard est de vous inscrire aux paiements préautorisés." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.lpc-forgiveness != null"
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900XK"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900F1"
      }, {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_late_payments",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "dbb63368-6937-4bfd-b051-617362233593"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_late_payments",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900XK"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900F1"
      }, {
        "parameter": "repeat_counter",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "97beb14d-04af-48c6-9bf9-45ae8bdff54d"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_late_payments",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900XK"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900F1"
      }, {
        "parameter": "repeat_counter",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "b50d0e6a-ffc2-42dc-bf5b-07f171dbc9dc"
  }, {
    "intent": "head_intent.payment_posting_time",
    "triggerFulfillment": {
    
    },
    "targetPage": "Payment Posting Time",
    "name": "62db4673-01b3-47bd-9329-561f71dc647f"
  }, {
    "intent": "head_intent.preauthorized_payment_setup",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "preauth_payment"
      }, {
        "parameter": "payment_method_action",
        "value": "add"
      } ]
    },
    "targetPage": "_PAP 1 Start",
    "name": "f857990e-df14-4fe4-b27e-7a8308842f1f"
  }, {
    "intent": "head_intent.payment_make",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "route",
        "value": "payment_make"
      }, {
        "parameter": "intent_exception_segment",
        "value": "4"
      } ]
    },
    "targetPage": "_PN 1 Start",
    "name": "b922f794-6a3c-4d92-a5dd-adbfe6e78539"
  }, {
    "intent": "supplemental.waive_late_charge",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_late_payments",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": null
      }, {
        "parameter": "repeat_counter",
        "value": null
      } ]
    },
    "targetPage": "Late Payment Forgiveness",
    "name": "d1eec5c5-0baf-4d08-97de-69bb8d954501"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900XK"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900F1"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "repeat_counter",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "af6cb76e-048c-4bc8-aa54-1b401ff32d92"
  }, {
    "condition": "$session.params.dtmf_late_payments = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900XK"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900F1"
      }, {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_late_payments",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "repeat_counter",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "30e12825-909c-4957-910f-32f6a7d48142"
  }, {
    "condition": "$session.params.dtmf_late_payments = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay, let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_late_payments",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "63ad1c28-40b6-4e92-a6dd-91840b9902d8"
  }, {
    "condition": "$session.params.dtmf_late_payments = 1 OR $session.params.dtmf_late_payments = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_late_payments",
        "value": null
      }, {
        "parameter": "latepayments_retrycnt",
        "value": "$sys.func.ADD($session.params.latepayments_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "8253e61d-f42f-49cf-b367-c8c1e5419dc0"
  }, {
    "condition": "$session.params.lpc-forgiveness = \"waive\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "latepayments_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_late_payments",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": null
      }, {
        "parameter": "repeat_counter",
        "value": null
      } ]
    },
    "targetPage": "Late Payment Forgiveness",
    "name": "55488155-294c-452c-aa33-750d7d6574fd"
  } ]
}
