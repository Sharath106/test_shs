{
  "name": "925d0bcf-e828-49e7-9b37-d0ddc1f988ad",
  "displayName": "_PARRS 4 Check Eligibility",
  "form": {
  
  },
  "entryFulfillment": {
    "webhook": "Payment Arrangement",
    "tag": "eligibility_check",
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "_PARRS 4 Check Eligibility"
    }, {
      "parameter": "ban",
      "value": "$session.params.user.ban"
    } ]
  },
  "transitionRoutes": [ {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Please wait, I'm still working on your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Veuillez patienter pendant que j'accède à vos informations." ]
        },
        "languageCode": "fr-ca"
      } ],
      "webhook": "Payment Arrangement",
      "tag": "eligibility_check",
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": "1"
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ],
      "returnPartialResponses": true
    },
    "name": "07a238ad-657a-45bc-9b66-b9ca4e6e53b4"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "targetPage": "Webhook Error Redirect",
    "name": "59309973-631d-4eeb-ae26-216cbca46086"
  }, {
    "condition": "$session.params.arrangement_status_cd = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I can help you with a payment arrangement." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je peux vous aider pour une entente de paiement." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "payment_options_counter",
        "value": 0
      } ],
      "advancedSettings": {
        "playbackInterruptionSettings": {
        
        }
      }
    },
    "targetPage": "_PARRS 6 Eligible",
    "name": "e85dacb0-40b4-4397-a725-b59db830b256"
  }, {
    "condition": "$session.params.arrangement_status_cd != \"0\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "_PARRS 5 Ineligible",
    "name": "76a75c95-cdea-448f-be99-9d23d893ee5a"
  } ],
  "eventHandlers": [ {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, I'm having an issue with your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, j'ai un problème avec votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "isWebhookError",
        "value": true
      } ]
    },
    "name": "88f2b01e-16fe-44b6-928f-e2ce42725eaf"
  }, {
    "targetPage": "Payment Arrangement",
    "event": "webhook.error.timeout",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, I'm having an issue with your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, j'ai un problème avec votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "isWebhookError",
        "value": true
      } ]
    },
    "name": "4e4c5b38-2901-46b2-84ea-68403b86af59"
  } ]
}
