{
  "name": "19e2e302-8661-483a-b71a-dd1b7d41533b",
  "displayName": "_PAP 8 PAP Remove",
  "form": {
  
  },
  "entryFulfillment": {
    "webhook": "Payment",
    "tag": "remove_pap",
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "_PAP 8 PAP Remove"
    } ]
  },
  "transitionRoutes": [ {
    "condition": "$session.params.pap_test_mode = true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      } ]
    },
    "name": "d8fbe847-be08-47bb-b1d9-5d42ea7c8ba5"
  }, {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Please wait, I'm still working on your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Veuillez patienter pendant que je traite votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "webhook": "Payment",
      "tag": "payment_method_remove",
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": "1"
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "name": "ded2873b-316a-44f9-9549-a98fa4f3ec1c"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "targetPage": "Webhook Error Redirect",
    "name": "c62226bb-b0f2-4aaa-8dcb-48471c1d5ed0"
  }, {
    "condition": "$session.params.payment_method = \"cash\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Pre-authorized payments have been successfully removed from your Mobility account. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Les paiements préautorisés ont été supprimés avec succès de votre compte." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "is_pap_available",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "8874aad4-4562-48aa-95ea-8432d97206ea"
  }, {
    "condition": "$session.params.payment_method != \"cash\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "Webhook Error Redirect",
    "name": "e7323764-933f-466c-a359-01aa1cf614bc"
  } ],
  "eventHandlers": [ {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, I'm having an issue with your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, j'ai un problème avec votre demande." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "7e341d6c-c0ab-4395-aad8-e8b5f12d25af"
  }, {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error.timeout",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, I'm having an issue with your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, j'ai un problème avec votre demande." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "d83fd843-52e0-4290-a54d-4797d049e094"
  } ]
}
