{
  "name": "af96285c-725c-468d-820a-7694fd468657",
  "displayName": "Pre Auth Payment issues",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_payment_issues",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Souhaitez-vous que j’envoie un message texte sur votre téléphone maintenant avec plus d’informations sur les problèmes de paiement et pour vérifier si vous êtes admissible à un crédit de frais de retard unique?" ]
            },
            "languageCode": "fr-ca"
          }, {
            "text": {
              "text": [ "Would you like me to send a text message with more information on payment issues and to check if you qualify for one-time late payment fee credit, to your phone now?" ]
            },
            "languageCode": "en"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Voulez-vous que j’envoie un message texte avec plus d’informations sur les problèmes de paiement à votre téléphone maintenant?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about payment issues to your phone now?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "5100c0b5-cb20-4a45-95f2-72687cef56fe"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "7693b08f-8648-40f1-a908-1bffe378dcbc"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "16581346-6430-4643-ae58-8f4b03e7ef26"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Voulez-vous que j’envoie un message texte avec plus d’informations sur les problèmes de paiement à votre téléphone maintenant?" ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about payment issues to your phone now?" ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "90e99e35-cc23-4def-b30e-510f4e7ed479"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            } ]
          },
          "name": "c98af66a-b5c0-4249-8c1a-4682d5151d9e"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "2ad16277-9bec-4577-a14d-ad475f0416e5"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Pre Auth Payment issues"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "specific payment issues"
    }, {
      "parameter": "page_summaryfr",
      "value": "problèmes de paiement spécifiques"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.repeat_counter = null OR $session.params.repeat_counter = 3",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Les paiements préautorisés par la banque, carte de crédit ou Visa Débit sont traités environ 15 jours après la date de facturation." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Après avoir configuré les paiements préautorisés, il peut prendre jusqu’à un cycle de facturation complet pour qu’il prenne effet et nous recommandons un paiement unique pour éviter tout frais de paiement en retard." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Assurez-vous également d’avoir mis à jour votre carte de crédit ou vos informations bancaires pour que les paiements automatiques soient effectués correctement." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pre-authorized payments through bank, credit card and Visa debit are processed approximately 15 days after your bill date." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "After setting up pre-authorized payments, it can take up to one full billing cycle for it to take effect and we would recommend a one-time payment to prevent any late payment charges." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Also, ensure you have updated your credit card or banking information for the automatic payments to go through correctly." ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.repeat_counter = 1 OR $session.params.repeat_counter = 4",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Les paiements préautorisés par la banque, carte de crédit ou Visa Débit sont traités environ 15 jours après la date de facturation." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Après avoir configuré les paiements préautorisés, il peut prendre jusqu’à un cycle de facturation complet pour qu’il prenne effet et nous recommandons un paiement unique pour éviter tout frais de paiement en retard." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Assurez-vous également d’avoir mis à jour votre carte de crédit ou vos informations bancaires pour que les paiements automatiques soient effectués correctement." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pre-authorized payments through bank, credit card and Visa debit are processed approximately 15 days after your bill date." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "After setting up pre-authorized payments, it can take up to one full billing cycle for it to take effect and we would recommend a one-time payment to prevent any late payment charges." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Also, ensure you have updated your credit card or banking information for the automatic payments to go through correctly." ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$session.params.repeat_counter = 2 OR $session.params.repeat_counter = 5",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Les paiements préautorisés par la banque, carte de crédit ou Visa Débit sont traités environ 15 jours après la date de facturation." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Après avoir configuré les paiements préautorisés, il peut prendre jusqu’à un cycle de facturation complet pour qu’il prenne effet et nous recommandons un paiement unique pour éviter tout frais de paiement en retard." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Assurez-vous également d’avoir mis à jour votre carte de crédit ou vos informations bancaires pour que les paiements automatiques soient effectués correctement." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pre-authorized payments through bank, credit card and Visa debit are processed approximately 15 days after your bill date." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "After setting up pre-authorized payments, it can take up to one full billing cycle for it to take effect and we would recommend a one-time payment to prevent any late payment charges." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Also, ensure you have updated your credit card or banking information for the automatic payments to go through correctly." ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "000B7aJJW4E40025"
      }, {
        "parameter": "sms_template_fr",
        "value": "000B7aJJW4E40028"
      }, {
        "parameter": "dtmf_payment_issues",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "bedd86f1-6f5a-4279-89f5-677961375162"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "dtmf_payment_issues",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "repeat_counter",
        "value": null
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "7d327bf4-b09e-42f3-8faa-02e1ebb9fc2f"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "dtmf_payment_issues",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "repeat_counter",
        "value": null
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "End page",
    "name": "95b60127-95a9-4f18-935a-0a6624e77731"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "000B7aJJW4E40025"
      }, {
        "parameter": "sms_template_fr",
        "value": "000B7aJJW4E40028"
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "repeat_counter",
        "value": null
      }, {
        "parameter": "dtmf_payment_issues",
        "value": null
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "cd850c79-9262-4e03-9713-0f6bc907f8de"
  }, {
    "condition": "$session.params.dtmf_payment_issues = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "000B7aJJW4E40025"
      }, {
        "parameter": "sms_template_fr",
        "value": "000B7aJJW4E40028"
      }, {
        "parameter": "dtmf_payment_issues",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "repeat_counter",
        "value": null
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "5c22a4c6-90c8-4433-8134-2d2fd7b5be76"
  }, {
    "condition": "$session.params.dtmf_payment_issues = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "D'accord, laissez-moi trouver quelqu’un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Okay, let me get someone to help you." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_payment_issues",
        "value": null
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "b4aa3bb1-54d1-4dc3-b240-396cd24f2363"
  }, {
    "condition": "$session.params.dtmf_payment_issues = 1 OR $session.params.dtmf_payment_issues = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_payment_issues",
        "value": null
      }, {
        "parameter": "paymentissues_retrycnt",
        "value": "$sys.func.ADD($session.params.paymentissues_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "1390de3d-c493-4314-9eff-1b22bad25a09"
  } ]
}
