{
  "name": "7edf6cc2-360c-4646-8336-c9c9df434d6f",
  "displayName": "_PN 5 Amount Check",
  "form": {
  
  },
  "entryFulfillment": {
    "webhook": "Payment",
    "tag": "retrieve_payment_method",
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "_PN 5 Amount Check"
    } ]
  },
  "transitionRoutes": [ {
    "condition": "$session.params.pn_test_mode = true",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      } ]
    },
    "name": "ce6a1436-6503-401c-8034-6e716e215442"
  }, {
    "condition": "$session.params.error_code != null AND $session.params.api_delay = \"false\" AND $session.params.error_retry != \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Please wait, I'm still working on your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Veuillez patienter, je suis en train de traiter votre demande." ]
        },
        "languageCode": "fr-ca"
      } ],
      "webhook": "Payment",
      "tag": "retrieve_payment_method",
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": "1"
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ],
      "returnPartialResponses": true
    },
    "name": "6399a1cc-f509-4404-9863-2bd4a7544125"
  }, {
    "condition": "($session.params.error_code != null AND $session.params.error_retry = \"1\") OR ($session.params.api_delay = \"true\" AND $session.params.error_code != null)",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "error_code",
        "value": null
      }, {
        "parameter": "error_retry",
        "value": null
      }, {
        "parameter": "api_delay",
        "value": null
      }, {
        "parameter": "error_full_response",
        "value": null
      }, {
        "parameter": "error_api_name",
        "value": null
      } ]
    },
    "targetPage": "Webhook Error Redirect",
    "name": "189e300f-09c4-4354-9195-72d6f2567d08"
  }, {
    "condition": "$session.params.one_time_pay_limit = 0.00 OR $session.params.one_time_pay_limit = 0.0 OR $session.params.pay_now_amount = 0 OR $session.params.pay_now_amount = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Currently you do not have any outstanding balance on your account." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Actuellement, vous n'avez aucun solde impay√© sur votre compte." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "targetPage": "End page",
    "name": "02b3207f-b4e1-4f46-b6ed-771213137e65"
  }, {
    "condition": "$session.params.pay_now_amount != null AND $session.params.route = \"payment_make\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "payment_amount",
        "value": "$sys.func.TO_NUMBER($session.params.pay_now_amount)"
      } ]
    },
    "targetPage": "_PN 6 Over Payment Check",
    "name": "89e8c7ff-7797-44a2-bfe4-a976bc2df2b7"
  }, {
    "condition": "$session.params.pay_now_amount = null AND $session.params.route = \"payment_make\"",
    "triggerFulfillment": {
    
    },
    "targetPage": "_PN Select Amt Type",
    "name": "eff27148-2193-4fbe-ba87-44762f0ccd42"
  } ],
  "eventHandlers": [ {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error",
    "triggerFulfillment": {
    
    },
    "name": "a73d0236-8b92-4314-a44e-88f3dd4a8d69"
  }, {
    "targetPage": "Webhook Error Redirect",
    "event": "webhook.error.timeout",
    "triggerFulfillment": {
    
    },
    "name": "246a9373-733f-4416-9b5c-26c51b08c2c0"
  } ]
}
