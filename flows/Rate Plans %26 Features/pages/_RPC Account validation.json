{
  "name": "b5c89a58-9295-4061-9388-143ee03a1147",
  "displayName": "_RPC Account validation",
  "form": {
  
  },
  "entryFulfillment": {
    "webhook": "Rate Plan Change",
    "tag": "rate_plan_change_initial",
    "setParameterActions": [ {
      "parameter": "ban",
      "value": "$session.params.subscriber_info[0].ban"
    }, {
      "parameter": "last_page",
      "value": "_RPC Account validation"
    } ]
  },
  "transitionRoutes": [ {
    "condition": "($session.params.subscriber_info[0].ban_status = \"S\" AND $session.params.suspend_reason = \"VADR\") OR ($session.params.subscriber_info[0].ban_status = \"S\" AND $session.params.suspend_reason = \"CVAD\")",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Your account is currently suspended on vacation disconnect." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I will have to get you to a team member to restore service, before we can see about changing your rate plan. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Votre compte est présentement suspendu temporairement pour voyage. " ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Je vais devoir vous mettre en contact avec un membre de l'équipe pour rétablir le service avant de pouvoir modifier votre plan." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "selfserve_mandatory",
        "value": "false"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "da64c222-d5b8-4793-834e-901cfcade7d5"
  }, {
    "condition": "$session.params.subscriber_info[0].ban_status = \"S\" AND $session.params.suspend_reason = \"SNP\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Unfortunately, at this time, we cannot process your plan change because your account is **suspended for non-payment**." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Malheureusement, pour le moment, nous ne pouvons pas traiter votre changement de forfait en raison de l'état actuel de votre compte : suspendu pour non-paiement." ]
        },
        "languageCode": "fr-ca"
      } ],
      "webhook": "Rate Plan Change",
      "tag": "get_paymentDueDt",
      "setParameterActions": [ {
        "parameter": "selfserve_mandatory",
        "value": false
      } ],
      "returnPartialResponses": true
    },
    "targetPage": "_RPC SNP",
    "name": "8e6ddd56-d1c3-4a5a-88d7-8f33030c05b1"
  }, {
    "condition": "$session.params.subscriber_info[0].ban_status = \"S\" AND $session.params.suspend_reason != \"SNP\" AND $session.params.suspend_reason != \"VADR\" AND $session.params.suspend_reason != \"CVAD\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Your account is suspended, I'll have to put you in touch with a team member." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Votre compte est suspendu, je vais devoir vous mettre en contact avec un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "selfserve_mandatory",
        "value": "false"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "df5a7a4a-1440-431d-9397-195c33b4e297"
  }, {
    "condition": "$session.params.subscriber_info[0].sub_status = \"S\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Your line is suspended, I'm going to have to put you through to a team member." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Votre ligne est actuellement suspendue, je vais devoir vous mettre en contact avec un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "selfserve_mandatory",
        "value": "false"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "bd2edf3b-ea50-4d74-8ddd-8718ee2cc0bd"
  }, {
    "condition": "$session.params.newCustomer = \"true\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Our records indicate that your account has just been activated." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Your current plan is $session.params.rate_plan_name at a cost of $$session.params.rate_plan_charge per month." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "If you'd like to look at options to change your rate plan, I'll need to get you to an agent." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Il semble que votre compte a récemment été activé." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Votre forfait actuel est $session.params.rate_plan_name pour $session.params.rate_plan_charge $ par mois." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Si vous voulez poursuivre avec le changement de votre forfait, je dois vous mettre en contact avec un agent." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "selfserve_mandatory",
        "value": false
      } ]
    },
    "targetPage": "End Page",
    "name": "34f8daf6-6099-461f-8d19-dd9cef6d30a3"
  }, {
    "condition": "$session.params.recent_renewal = true",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Our records show that your line was recently renewed. We are unable to change your rate plan via self-service at this time." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "I'll have to get you to an agent." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Il semble que votre ligne a été renouvelée récemment. Nous ne sommes donc pas en mesure de changer votre forfait pour le moment." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Je vais devoir vous mettre en contact avec un agent." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "selfserve_mandatory",
        "value": false
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "a17c813c-b1f0-452f-9133-7984f8f641ae"
  }, {
    "condition": "($session.params.subscriber_info[0].roleTxt = \"Account Owner\" OR $session.params.subscriber_info[0].roleTxt = \"Account Manager\") AND ($session.params.subscriber_info[0].accountTypeCd = \"I\" AND $session.params.subscriber_info[0].accountSubTypeCd = \"R\")",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "isEPP",
        "value": "false"
      } ]
    },
    "targetPage": "_RPC Eligibility",
    "name": "758f843c-8ded-44c5-ba91-6ba12c20e725"
  }, {
    "condition": "($session.params.subscriber_info[0].roleTxt = \"Account Owner\" OR $session.params.subscriber_info[0].roleTxt = \"Account Manager\") AND ($session.params.subscriber_info[0].accountTypeCd = \"C\" AND ($session.params.subscriber_info[0].accountSubTypeCd = \"E\" OR $session.params.subscriber_info[0].accountSubTypeCd = \"I\"))",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "isEPP",
        "value": "true"
      } ]
    },
    "name": "11e49581-8913-485c-b78a-570f284ae38c"
  }, {
    "condition": "true",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Unfortunately, we can't make any changes to your rate plan. " ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "If you require more assistance, I will need to get you to a team member." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Malheureusement, nous ne sommes pas en mesure d'apporter des changements à votre forfait." ]
        },
        "languageCode": "fr-ca"
      }, {
        "text": {
          "text": [ "Si vous avez besoin d'aide, je devrai vous mettre en contact avec un membre de l'équipe." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "isEPP",
        "value": "false"
      } ]
    },
    "targetPage": "End Page",
    "name": "60686dfd-4ae4-4e1d-9db3-fd73559d39cc"
  } ],
  "eventHandlers": [ {
    "targetPage": "Rate plan change",
    "event": "webhook.error",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, I am having issues with your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, j'ai des problèmes avec votre demande." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "65e1383f-731e-482b-8147-52aa78d2526f"
  }, {
    "targetPage": "Rate plan change",
    "event": "webhook.error.timeout",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, I am having issues with your request." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, j'ai des problèmes avec votre demande." ]
        },
        "languageCode": "fr-ca"
      } ]
    },
    "name": "681ca5e8-6b41-4d92-bfa8-e1e4fc7260d2"
  } ]
}
