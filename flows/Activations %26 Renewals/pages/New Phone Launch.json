{
  "name": "1f17de1c-7f65-499f-872c-b2db5092cd50",
  "displayName": "New Phone Launch",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_preorder_yesno",
      "required": true,
      "entityType": "@dtmf-menu",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send a text with a link to order the new iPhone 15?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "Aimeriez-vous recevoir un message texte avec un lien pour acheter le nouvel iPhone 15?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text with a link to order the new iPhone 15?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je ne comprends pas.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous recevoir un message texte avec un lien pour acheter le nouvel iPhone 15?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "b0bfbac9-cc79-4b42-8758-6e9695317780"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, no, or press 2." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Non, ou faites le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "86710ca0-4959-4242-bc10-7fcf37104a97"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "0b523198-6d52-4cc7-8860-6f9d135c35de"
        }, {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text with a link to order the new iPhone 15?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je ne comprends pas.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous recevoir un message texte avec un lien pour acheter le nouvel iPhone 15?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "48b9646e-68aa-4e5e-9f1b-31652cbb7540"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, no, or press 2." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Non, ou faites le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "39a25e8f-1438-42ed-b860-47fd22d25785"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "52505428-b176-4e4e-a63d-030c87ce1581"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "messages": [ {
      "text": {
        "text": [ "All four models of the brand new Apple iPhone 15 are now available to purchase." ]
      },
      "languageCode": "en"
    }, {
      "text": {
        "text": [ "It's packed with cutting-edge features that make it a fantastic mobile device." ]
      },
      "languageCode": "en"
    }, {
      "text": {
        "text": [ "Les quatre modèles du tout nouveau Apple iPhone 15 sont maintenant disponibles à l'achat.\nIl est doté de fonctionnalités de pointe qui en font un appareil mobile fantastique." ]
      },
      "languageCode": "fr-ca"
    } ],
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "New Phone Launch"
    }, {
      "parameter": "sms_template",
      "value": "000B6aJC6QPM01E0"
    }, {
      "parameter": "sms_template_fr",
      "value": "000B6aJC6QPM01E3"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "last_page_summary",
      "value": "our new phone"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "notre nouveau téléphone"
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "f8e54b1a-2d23-4d74-8651-f8d9a7e4bdf0"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "df6cae28-c4f3-4f79-83f8-66056db85dc7"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "dtmf_preorder_yesno",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "fd30e721-9daf-42b7-9afa-f9a92ff40795"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "dtmf_preorder_yesno",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "6f0e4c49-72b8-4f8f-b05d-dc14bf944dec"
  }, {
    "condition": "$session.params.dtmf_preorder_yesno = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "dtmf_preorder_yesno",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "d7314b97-34e9-4111-846a-10fb6c82c5f6"
  }, {
    "condition": "$session.params.dtmf_preorder_yesno = \"2\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "dtmf_preorder_yesno",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "d5d3a664-30b6-4fd8-95d4-a3e16201f8d7"
  }, {
    "condition": "$session.params.preorder_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "preorder_retrycnt",
        "value": 0
      } ]
    },
    "name": "74688301-70eb-4aac-8bb9-ee241778005f"
  }, {
    "condition": "$session.params.preorder_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "preorder_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "9662ce1b-6688-4b9d-919b-603c8f74e022"
  }, {
    "condition": "$session.params.dtmf_preorder_yesno != \"9\" AND $session.params.dtmf_preorder_yesno != \"2\" AND $session.params.dtmf_preorder_yesno != null",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_preorder_yesno",
        "value": null
      }, {
        "parameter": "preorder_retrycnt",
        "value": "$sys.func.ADD($session.params.preorder_retrycnt,1)"
      } ]
    },
    "name": "e36f5b26-ad28-4d47-a345-ef98feb7843e"
  } ]
}
