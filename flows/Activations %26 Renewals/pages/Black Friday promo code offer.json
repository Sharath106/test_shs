{
  "name": "f5bc1010-0d1c-483e-9309-db794a551685",
  "displayName": "Black Friday promo code offer",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_bfpromo",
      "required": true,
      "entityType": "@dtmf-menu-1-2",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send a text message with your promo code and more information on this to your phone?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "Souhaitez-vous que j'envoie un message texte avec votre code promo et plus d'informations à ce sujet sur votre téléphone?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "I didn't catch that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information along with this promotional code?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous recevoir un message texte avec votre code promotionnel et plus d'informations à ce sujet?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "6a634486-1567-4ae4-bc57-c9cec981b18a"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "If you'd like to receive a text message with the promotional code, say yes, or press 1. Otherwise, say no, or press 2." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir votre code promo par message texte, dites oui ou faites le 1. Autrement, dites non ou faites le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "2ff0682b-cfa9-47ba-8230-636123f58157"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "67086f24-8723-4524-b8f6-09f53e0c497b"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "I didn't quite hear that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information along with this promotional code?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Je n'ai pas bien entendu." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous recevoir un message texte avec votre code promotionnel et plus d'informations à ce sujet?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "5b4ffeb0-3eb9-4fc6-803f-c99355e9a434"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "If you'd like to receive a text message with the promotional code, say yes, or press 1. Otherwise, say no, or press 2." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir votre code promo par message texte, dites oui ou faites le 1. Autrement, dites non ou faites le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "69d05696-e628-4529-90a6-5a5a1119c51d"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "15544b1d-77e3-431a-a063-dc0e60611d63"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 2,
          "useSystemEntityRule": false,
          "interdigitTimeoutDuration": {
            "seconds": 5
          },
          "endpointingTimeoutDuration": {
            "seconds": 5
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Black Friday promo code offer"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "our available promotions"
    }, {
      "parameter": "page_summaryfr",
      "value": "nos promotions disponibles"
    }, {
      "parameter": "last_page_summary",
      "value": "our available promotions"
    }, {
      "parameter": "last_page_summaryfr",
      "value": " nos promotions disponibles"
    }, {
      "parameter": "sms_template",
      "value": "$sys.func.IF(\"$session.params.fromPage = renewal\", 000BAaJM29TN018T, 000BAaJM29TN018Q)"
    }, {
      "parameter": "sms_template_fr",
      "value": "$sys.func.IF(\"$session.params.fromPage = renewal\", 000BAaJM29TN018W, 000BAaJM29TN0190)"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.fromPage = \"renewal\"",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Upgrading your device is easier than ever. Please note that you may need to pay off any outstanding device balance. Skip the lines and access exclusive deals through My TELUS, including a limited time $$session.params.bf_promo_credit bill credit available only online using our exclusive promo code." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Le renouvellement de votre appareil est plus facile que jamais. Veuillez noter que vous devrez peut-être rembourser tout solde impayé de votre appareil." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Évitez la file d'attente et accédez à des offres exclusives via Mon TELUS en ligne, y compris un crédit sur facture de $session.params.bf_promo_credit$ d'une durée limitée disponible uniquement en ligne en utilisant notre code promotionnel exclusif." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Skip the lines and access exclusive deals through My TELUS, including a limited time $$session.params.bf_promo_credit bill credit available only online using our exclusive promo code." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Évitez la file d'attente et accédez à des offres exclusives via Mon TELUS en ligne, y compris un crédit sur facture de $session.params.bf_promo_credit$ d'une durée limitée disponible uniquement en ligne en utilisant notre code promotionnel exclusif." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "9acc2bd2-0655-45d7-99fe-4cd5fc6d6977"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "End Page",
    "name": "7ff5fe99-ec5b-4ade-a5d0-f7371de6e28b"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "End Page",
    "name": "ed8b818e-8e7c-4582-be49-174fa73c9d79"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "2072fe3e-de7e-475c-8a24-5fb30b3f87e1"
  }, {
    "condition": "$session.params.dtmf_bfpromo = \"1\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "dtmf_bfpromo",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "f27af3a7-fad1-4bda-8d85-d7e026475cbf"
  }, {
    "condition": "$session.params.dtmf_bfpromo = \"2\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "dtmf_bfpromo",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetPage": "End Page",
    "name": "15263677-f32b-4ab3-ac50-6a7edcbcce37"
  } ]
}
