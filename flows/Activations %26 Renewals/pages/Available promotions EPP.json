{
  "name": "50c6344b-879a-44b5-b0b6-e00ce25b991a",
  "displayName": "Available promotions EPP",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_promotions_epp",
      "required": true,
      "entityType": "@dtmf-menu-9-0",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "messages": [ {
            "text": {
              "text": [ "Would you like me to send a text message with more information about the offers that your organization is eligible for?" ]
            },
            "languageCode": "en"
          }, {
            "text": {
              "text": [ "Aimeriez-vous que j'envoie un lien à votre téléphone avec plus d'informations sur les offres auxquelles votre organisation est admissible pour?" ]
            },
            "languageCode": "fr-ca"
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "I'm sorry, I didn't understand that.", "Sorry, I didn't catch that.", "I didn't catch that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about the offers that your organization is eligible for?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un lien à votre téléphone avec plus d'informations sur les offres auxquelles votre organisation est admissible pour?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "d6935cb4-43ea-4587-a296-a300975fc7d6"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "eea973a7-d5a4-4903-b2ef-6975dca7df2a"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "ae720faa-3d75-4ce7-ac51-ea17007ea1eb"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "I'm sorry, I didn't understand that.", "Sorry, I didn't catch that.", "I didn't catch that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a text message with more information about the offers that your organization is eligible for?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Aimeriez-vous que j'envoie un lien à votre téléphone avec plus d'informations sur les offres auxquelles votre organisation est admissible pour?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "4e62cd73-13a7-4799-93df-81688b811914"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "90f5be1a-688d-4105-bc62-72d3cf988d1c"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "e3dab9c8-3d37-40ad-89a9-a80cd4026fae"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Available promotions EPP"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "our available promotions"
    }, {
      "parameter": "page_summaryfr",
      "value": "promotions disponibles"
    }, {
      "parameter": "last_page_summary",
      "value": "our available promotions"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "promotions disponibles"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$session.params.repeat_counter = null OR $session.params.repeat_counter = 3",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "We always have some fantastic deals ready for you!" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you have an existing account and are currently on a contract, please check your remaining device balance on My TELUS." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Your device balance amount will be charged if you decide to renew before your term ends." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Nous avons toujours quelques offres fantastiques prêtes pour vous!" ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez un compte existant et vous êtes actuellement sous contrat, veuillez vérifier le solde restant de votre appareil sur Mon TELUS, car ce montant vous sera facturé si vous décidez de renouveler avant la fin de votre entente." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.repeat_counter = 1 OR $session.params.repeat_counter = 4",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "TELUS is always offering amazing deals, so be sure to take advantage of them!" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you're currently under contract and have an existing account, it's important to check your remaining device balance on My TELUS." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you renew before your term ends, your device balance amount will be charged." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "TELUS offre toujours des offres incroyables, alors assurez-vous d'en profiter! Si vous êtes actuellement sous contrat et que vous avez un compte existant, il est important de vérifier votre solde de l'appareil restant sur Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous renouvelez avant la fin de votre terme, le montant de votre solde d'appareil sera facturé." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.repeat_counter = 2 OR $session.params.repeat_counter = 5",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "At TELUS, we always have fantastic deals available for you!" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you're currently under contract and have an existing account, make sure to check your remaining device balance on My TELUS." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you decide to renew before your term ends, your device balance amount will be charged." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Chez TELUS, nous avons toujours des offres fantastiques disponibles pour vous! Si vous êtes actuellement sous contrat et que vous avez un compte existant, assurez-vous de vérifier votre solde de l'appareil restant sur Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous décidez de renouveler avant la fin de votre terme, le montant de votre solde d'appareil sera facturé." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "000ACaJ2T7C20039"
      }, {
        "parameter": "availablepromotionepp_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_promotions_epp",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "sms_template_fr",
        "value": "000ACaJ2T7C20036"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "3598f452-2046-4189-8189-51e1f90bf29c"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "availablepromotionepp_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_promotions_epp",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "000ACaJ2T7C20039"
      }, {
        "parameter": "sms_template_fr",
        "value": "000ACaJ2T7C20036"
      } ]
    },
    "targetPage": "End Page",
    "name": "e8d8c58e-1e78-49a3-8294-606be1a1e4f6"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "availablepromotionepp_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_promotions_epp",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "000ACaJ2T7C20039"
      }, {
        "parameter": "sms_template_fr",
        "value": "000ACaJ2T7C20036"
      } ]
    },
    "targetPage": "End Page",
    "name": "3f78cdc2-f654-4a65-8ee4-5657b085042f"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "sms_template",
        "value": "000ACaJ2T7C20039"
      }, {
        "parameter": "sms_template_fr",
        "value": "000ACaJ2T7C20036"
      }, {
        "parameter": "availablepromotionepp_retrycnt",
        "value": null
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "6c2a8d5a-6382-4a38-a60a-18e621788544"
  }, {
    "condition": "$session.params.dtmf_promotions_epp = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "000ACaJ2T7C20039"
      }, {
        "parameter": "availablepromotionepp_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_promotions_epp",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      }, {
        "parameter": "sms_template_fr",
        "value": "000ACaJ2T7C20036"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "c25263b8-1f72-4796-807a-d0e0c2620068"
  }, {
    "condition": "$session.params.dtmf_promotions_epp = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay, let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi chercher quelqu'un pour vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "availablepromotionepp_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_promotions_epp",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "be0f06df-69b6-4a09-b386-975a1c355c3c"
  }, {
    "condition": "$session.params.availablepromotionepp_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "availablepromotionepp_retrycnt",
        "value": 0
      } ]
    },
    "name": "78b163cc-1f47-4478-a4e9-8a61f9234814"
  }, {
    "condition": "$session.params.availablepromotionepp_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "availablepromotionepp_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "02e13681-d7bd-4e7b-856d-4683b01e3426"
  }, {
    "condition": "$session.params.dtmf_promotions_epp = 1 OR $session.params.dtmf_promotions_epp = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "\nDésolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "\nDésolé, je ne pense pas avoir compris." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_promotions_epp",
        "value": null
      }, {
        "parameter": "availablepromotionepp_retrycnt",
        "value": "$sys.func.ADD($session.params.availablepromotionepp_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "f00dd8f7-ea85-4229-b08b-f0eadf18992b"
  } ],
  "transitionRouteGroups": [ "supp_routes" ]
}
