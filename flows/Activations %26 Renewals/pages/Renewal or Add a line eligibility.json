{
  "name": "cef6df43-8da1-44e6-b955-881a576e28d4",
  "displayName": "Renewal or Add a line eligibility",
  "form": {
    "parameters": [ {
      "displayName": "activation_vs_renew",
      "required": true,
      "entityType": "@activation-vs-renew",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Are you looking to renew your line, or add a line to your account?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Vous souhaitez renouveler votre ligne ou ajouter une ligne à votre compte?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "e0ea4142-6e99-42bc-95fe-6d1b535f3424"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To renew your line, say renew or press 1, for adding a line to your account say activation or press 2. To connect with a team member say team member or press 3." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour renouveler votre ligne, dites renouveler ou faites le 1. Pour ajouter une ligne à votre compte, dites activer ou faites le 2. Pour vous connecter à un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "47ebab27-cec8-4edd-9ce4-50ac8a3e6848"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "90574f78-47f4-4e14-ba53-1a096d17cdc7"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Are you looking to renew your line, or add a line to your account?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Vous souhaitez renouveler votre ligne ou ajouter une ligne à votre compte?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "fcfa3abb-ccd9-4c9f-8e91-8ccd65f6ebe9"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To renew your line, say renew or press 1, for adding a line to your account say activation or press 2. To connect with a team member say team member or press 3." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour renouveler votre ligne, dites renouveler ou faites le 1. Pour ajouter une ligne à votre compte, dites activer ou faites le 2. Pour vous connecter à un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "791471cf-4c0e-4b35-9e3a-0c53401e398b"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "77daf9ae-cd11-4616-9876-6fe7438daf32"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Renewal or Add a line eligibility"
    }, {
      "parameter": "last_page_summary",
      "value": "getting a new phone"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "obtenir un nouveau téléphone"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.eligibility_retrycnt = null OR $session.params.eligibility_retrycnt = 0) AND $session.params.activation_vs_renew = null",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Are you looking to renew your line, or add a line to your account?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Vous souhaitez renouveler votre ligne ou ajouter une ligne à votre compte?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.eligibility_retrycnt = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "Are you looking to renew your line, or add a line to your account?" ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Vous souhaitez renouveler votre ligne ou ajouter une ligne à votre compte?" ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "condition": "$session.params.eligibility_retrycnt = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "To renew your line, say renew or press 1, for adding a line to your account say activation or press 2. To connect with a team member say team member or press 3." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour renouveler votre ligne, dites renouveler ou faites le 1. Pour ajouter une ligne à votre compte, dites activer ou faites le 2. Pour vous connecter à un membre de l'équipe, dites membre de l'équipe ou faites le 0." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": null
      }, {
        "parameter": "activation_vs_renew",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "752109b6-f295-496c-93c2-765bf383ec10"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": null
      }, {
        "parameter": "activation_vs_renew",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "588814ce-af97-429d-a93e-f737c04aa5d4"
  }, {
    "condition": "($session.params.activation_vs_renew = \"renew\" AND $session.params.isEPP = \"false\") OR ($session.params.activation_vs_renew = \"1\" AND $session.params.isEPP = \"false\")",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "The best way to find out if you're eligible is to complete your order online, and the system will let you know if there's anything else." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "La meilleure façon de confirmer est de tenter de faire votre renouvellement en ligne, et le système vous mentionnera s'il y a quoi que ce soit." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": null
      }, {
        "parameter": "eligibility",
        "value": true
      } ]
    },
    "targetPage": "Renewal",
    "name": "34582bd2-a749-4aeb-a0e5-fa0edc7fcb46"
  }, {
    "condition": "($session.params.activation_vs_renew = \"activate\" AND $session.params.isEPP = \"false\") OR ($session.params.activation_vs_renew = \"2\" AND $session.params.isEPP = \"false\")",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I am really glad to hear that you're looking to activate a new line with TELUS." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Je suis ravi d'apprendre que vous souhaitez activer une ligne avec TELUS." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "activation_vs_renew",
        "value": null
      }, {
        "parameter": "eligibility_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "New activation",
    "name": "afb5a770-a781-4032-a7db-82584d3dcd58"
  }, {
    "condition": "($session.params.activation_vs_renew = \"renew\" AND $session.params.isEPP = \"true\") OR ($session.params.activation_vs_renew = \"1\" AND $session.params.isEPP = \"true\")",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": null
      }, {
        "parameter": "activation_vs_renew",
        "value": null
      } ]
    },
    "targetPage": "Renewal EPP",
    "name": "920d8257-78d6-4c26-9160-6081ea1834ba"
  }, {
    "condition": "($session.params.activation_vs_renew = \"activate\" AND $session.params.isEPP = \"true\") OR ($session.params.activation_vs_renew = \"2\" AND $session.params.isEPP = \"true\")",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": null
      }, {
        "parameter": "activation_vs_renew",
        "value": null
      } ]
    },
    "targetPage": "New activation EPP",
    "name": "db7acd5a-2f2a-49d5-8dae-afe197fde94f"
  }, {
    "condition": "$session.params.activation_vs_renew = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay, let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi demander à quelqu'un de vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": null
      }, {
        "parameter": "activation_vs_renew",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "65da07b5-5cc0-4140-80ae-d0b48fee8156"
  }, {
    "condition": "$session.params.eligibility_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": 0
      } ]
    },
    "name": "e9982ab6-9f98-4b06-99ce-360fff5799fa"
  }, {
    "condition": "$session.params.eligibility_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "2837c25c-a3ba-47e6-82ab-af5020ee018a"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "eligibility_retrycnt",
        "value": "$sys.func.ADD($session.params.eligibility_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.eligibility_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas bien compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.eligibility_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne comprends pas." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "90784ac5-2d9a-4d84-9b34-61f2c26b3b06"
  } ]
}
