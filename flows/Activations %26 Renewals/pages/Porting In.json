{
  "name": "8c4bf758-4478-4084-8ece-ba1eb37c6700",
  "displayName": "Porting In",
  "form": {
    "parameters": [ {
      "displayName": "dtmf_porting_in",
      "required": true,
      "entityType": "@dtmf-menu-9-0",
      "fillBehavior": {
        "initialPromptFulfillment": {
        
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a link with more information on porting in to your phone now?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Je suis désolé, je ne suis pas certain de comprendre.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous que je vous envoie un lien avec plus d'informations à ce sujet?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "1e491e9d-519b-45e6-b42e-a9f0d6645588"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "6685073f-ee41-45ad-b1e9-059a16dc947f"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "9ecb1873-2a71-495b-90ea-36191c551915"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Would you like me to send a link with more information on porting in to your phone now?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Je suis désolé, je ne suis pas certain de comprendre.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Souhaitez-vous que je vous envoie un lien avec plus d'informations à ce sujet?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "d41b28f0-4a0f-42aa-9890-9704bbeb3c6b"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "To receive a text message, say yes, or press 9, team member, or press 0." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Pour recevoir un message texte, dites oui ou faites le 9. Membre de l'équipe, ou faites le 0." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "05981916-b319-4583-a665-f730c8eaa1ed"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "60e7272c-2ae5-4aab-bf9f-139404f6c52d"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Porting In"
    }, {
      "parameter": "sms_flow_status",
      "value": "offered"
    }, {
      "parameter": "page_summary",
      "value": "porting to TELUS"
    }, {
      "parameter": "page_summaryfr",
      "value": "transfert de numéro de téléphone"
    }, {
      "parameter": "last_page_summary",
      "value": "transferring your number to TELUS"
    }, {
      "parameter": "last_page_summaryfr",
      "value": "transférer votre numéro de téléphone"
    }, {
      "parameter": "mandatory_ss",
      "value": "true"
    }, {
      "parameter": "dtmf_porting_in",
      "value": "9"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "($session.params.routeDetails.province = \"NB\" OR $session.params.routeDetails.province = \"NS\" OR $session.params.routeDetails.province = \"NF\" OR $session.params.routeDetails.province = \"PE\") AND $session.params.app_first_poc = true",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "To transfer any existing phone number to your TELUS Mobility account, you must use your My TELUS account to get the fastest resolution. It's easy to use and allows you to avoid waiting on the line." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "An agent may not be able to complete this on a customer behalf." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "To help you find how to start the process, we are sending you a link to My TELUS now." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "If you still need help, you can request a priority call back from the virtual assistant in your My TELUS account." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour transférer un numéro vers votre compte mobile de TELUS, vous devez utiliser votre compte Mon TELUS pour obtenir la résolution la plus rapide. Il est simple à utiliser et vous permet d'éviter d'attendre en ligne." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Un agent peut ne pas être en mesure d'aider à faire ça au nom d'un client." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Pour vous aider à initier un transfert de numéro de téléphone, nous vous envoyons dès maintenant un lien vers Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Si vous avez encore besoin d'aide, vous pouvez demander un rappel prioritaire à l'assistant virtuel dans votre compte Mon TELUS." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      }, {
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "You can transfer any existing phone number to your TELUS Mobility account, including numbers from other carriers, and landline numbers, quickly and easily." ]
            },
            "languageCode": "en"
          }
        }, {
          "message": {
            "text": {
              "text": [ "Vous pouvez transférer rapidement et facilement tout numéro de téléphone existant à votre compte TELUS Mobilité, y compris les numéros d’autres fournisseurs et les numéros de téléphone fixe." ]
            },
            "languageCode": "fr-ca"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_yes",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900YE"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900HN"
      }, {
        "parameter": "portingin_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_porting_in",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "5f370ad7-4b42-4b04-8c5c-9f97ad6ca166"
  }, {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "portingin_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_porting_in",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900YE"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900HN"
      } ]
    },
    "targetPage": "End Page",
    "name": "c491d944-9cfd-4eeb-b0aa-f5b0599a8389"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "portingin_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_porting_in",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "declined"
      }, {
        "parameter": "sms_template",
        "value": "0009SaHN731900YE"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900HN"
      } ]
    },
    "targetPage": "End Page",
    "name": "7d33c200-428f-46d7-ac18-40faf16b9596"
  }, {
    "intent": "supplemental.sendtxt",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900YE"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900HN"
      }, {
        "parameter": "portingin_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_porting_in",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "44808333-17cf-4324-8909-5037b4868551"
  }, {
    "condition": "$session.params.dtmf_porting_in = \"9\"",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "sms_template",
        "value": "0009SaHN731900YE"
      }, {
        "parameter": "sms_template_fr",
        "value": "0009SaHN731900HN"
      }, {
        "parameter": "portingin_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_porting_in",
        "value": null
      }, {
        "parameter": "sms_flow_status",
        "value": "accepted"
      } ]
    },
    "targetFlow": "SMS Flow",
    "name": "72b16056-04aa-4a1b-9753-563e9774e646"
  }, {
    "condition": "$session.params.dtmf_porting_in = \"0\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Okay let me get someone to help you." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "D'accord, laissez-moi demander à quelqu'un de vous aider." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "portingin_retrycnt",
        "value": null
      }, {
        "parameter": "dtmf_porting_in",
        "value": null
      } ]
    },
    "targetFlow": "Universal handoff",
    "name": "acf1e39c-9015-49ac-a028-77d04d312585"
  }, {
    "condition": "$session.params.portingin_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "portingin_retrycnt",
        "value": 0
      } ]
    },
    "name": "6adea74e-98f6-4cf4-9edf-6ffcbeb74b19"
  }, {
    "condition": "$session.params.portingin_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "portingin_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "afd9b43a-199b-40c1-a787-d609dbaf578a"
  }, {
    "condition": "$session.params.dtmf_porting_in = 1 OR $session.params.dtmf_porting_in = 3",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "dtmf_porting_in",
        "value": null
      }, {
        "parameter": "portingin_retrycnt",
        "value": "$sys.func.ADD($session.params.portingin_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "125daaa1-79e7-450b-95a0-453c85ca02c4"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "portingin_retrycnt",
        "value": "$sys.func.ADD($session.params.portingin_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.portingin_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.portingin_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't catch that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "fa304ef4-f69f-4c00-b05d-e36fd2f7187f"
  } ]
}
