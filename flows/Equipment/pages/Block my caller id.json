{
  "name": "3d1bdc84-f595-4653-b31b-f172e4d4ee9b",
  "displayName": "Block my caller id",
  "form": {
    "parameters": [ {
      "displayName": "iphone_vs_android",
      "required": true,
      "entityType": "@iphone-vs-android",
      "fillBehavior": {
        "initialPromptFulfillment": {
          "conditionalCases": [ {
            "cases": [ {
              "condition": "($session.params.blockmycallerid_retrycnt = null OR $session.params.blockmycallerid_retrycnt = 0) AND $session.params.iphone_vs_android != null",
              "caseContent": [ {
                "message": {
                  "text": {
                    "text": [ "You can block your number when calling out on a per call basis, or have it blocked permanently. To block your number before each call, first dial, pound,3,1,pound, and then the 10-digit phone number." ]
                  },
                  "languageCode": "en"
                }
              }, {
                "message": {
                  "text": {
                    "text": [ "Vous pouvez bloquer votre numéro de téléphone pour le temps d'un appel seulement ou le bloquer définitivement pour tous vos appels. Pour bloquer votre numéro pour un appel seulement, composez le, carré, 3, 1, carré, suivi du numéro de téléphone à 10 chiffres." ]
                  },
                  "languageCode": "fr-ca"
                }
              } ]
            }, {
              "condition": "($session.params.blockmycallerid_retrycnt = null OR $session.params.blockmycallerid_retrycnt = 0) AND $session.params.iphone_vs_android = null",
              "caseContent": [ {
                "message": {
                  "text": {
                    "text": [ "You can block your number when calling out on a per call basis, or have it blocked permanently. To block your number before each call, first dial, pound,3,1,pound, and then the 10-digit phone number." ]
                  },
                  "languageCode": "en"
                }
              }, {
                "message": {
                  "text": {
                    "text": [ "If you'd like to have your number blocked permanently, can you tell me what type of device you are using? iPhone or Android." ]
                  },
                  "languageCode": "en"
                }
              }, {
                "message": {
                  "text": {
                    "text": [ "Vous pouvez bloquer votre numéro de téléphone pour le temps d'un appel seulement ou le bloquer définitivement pour tous vos appels. Pour bloquer votre numéro pour un appel seulement, composez le, carré, 3, 1, carré, suivi du numéro de téléphone à 10 chiffres." ]
                  },
                  "languageCode": "fr-ca"
                }
              }, {
                "message": {
                  "text": {
                    "text": [ "Si vous souhaitez que votre numéro soit définitivement bloqué, pouvez-vous me dire quel type d'appareil vous utilisez? iPhone ou Android" ]
                  },
                  "languageCode": "fr-ca"
                }
              } ]
            }, {
              "condition": "$session.params.blockmycallerid_retrycnt = 1",
              "caseContent": [ {
                "message": {
                  "text": {
                    "text": [ "To have your number blocked permanently, can you tell me are you using an iPhone or an Android device?" ]
                  },
                  "languageCode": "en"
                }
              }, {
                "message": {
                  "text": {
                    "text": [ "Pour bloquer définitivement votre numéro, pouvez-vous me dire si vous utilisez un iPhone ou un appareil Android?" ]
                  },
                  "languageCode": "fr-ca"
                }
              } ]
            }, {
              "condition": "$session.params.blockmycallerid_retrycnt = 2",
              "caseContent": [ {
                "message": {
                  "text": {
                    "text": [ "If you have an iPhone, say iPhone or press 1. If you have an Android, say Android or press 2." ]
                  },
                  "languageCode": "en"
                }
              }, {
                "message": {
                  "text": {
                    "text": [ "Si vous avez un iPhone, dites iPhone ou faites le 1. Si vous avez un appareil Android, dites Android ou faites le 2." ]
                  },
                  "languageCode": "fr-ca"
                }
              } ]
            } ]
          } ]
        },
        "repromptEventHandlers": [ {
          "event": "sys.no-match-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "To have your number blocked permanently, can you tell me are you using an iPhone or an Android device?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Pour bloquer définitivement votre numéro, pouvez-vous me dire si vous utilisez un iPhone ou un appareil Android?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "a0e4bc75-1d06-43eb-ab25-73abf047ccae"
        }, {
          "event": "sys.no-match-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "If you have an iPhone, say iPhone or press 1. If you have an Android, say Android or press 2." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Si vous avez un iPhone, dites iPhone ou faites le 1. Si vous avez un appareil Android, dites Android ou faites le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "c5685e14-21b0-4d83-9f63-3bf519274a85"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-match-3",
          "triggerFulfillment": {
          
          },
          "name": "c93c1a27-d203-47b5-bc16-c7f1933f2342"
        }, {
          "event": "sys.no-input-1",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "To have your number blocked permanently, can you tell me are you using an iPhone or an Android device?" ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
              },
              "languageCode": "fr-ca"
            }, {
              "text": {
                "text": [ "Pour bloquer définitivement votre numéro, pouvez-vous me dire si vous utilisez un iPhone ou un appareil Android?" ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "53d03229-084b-4bae-9e47-50b93d886cbd"
        }, {
          "event": "sys.no-input-2",
          "triggerFulfillment": {
            "messages": [ {
              "text": {
                "text": [ "If you have an iPhone, say iPhone or press 1. If you have an Android, say Android or press 2." ]
              },
              "languageCode": "en"
            }, {
              "text": {
                "text": [ "Si vous avez un iPhone, dites iPhone ou faites le 1. Si vous avez un appareil Android, dites Android ou faites le 2." ]
              },
              "languageCode": "fr-ca"
            } ]
          },
          "name": "2c0df5e8-e029-4093-b127-ecc94d8f2331"
        }, {
          "targetPage": "No Match 2",
          "event": "sys.no-input-3",
          "triggerFulfillment": {
          
          },
          "name": "2dc03f5a-c192-4709-8be0-5f25b82c70c5"
        } ]
      },
      "advancedSettings": {
        "dtmfSettings": {
          "enabled": true,
          "maxDigits": 1,
          "useSystemEntityRule": false,
          "endpointingTimeoutDuration": {
            "seconds": 8
          }
        }
      }
    } ]
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "last_page",
      "value": "Block my caller id"
    } ]
  },
  "transitionRoutes": [ {
    "intent": "small_talk.confirmation_no",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "blockmycallerid_retrycnt",
        "value": null
      }, {
        "parameter": "iphone_vs_android",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "2177335e-ee33-492f-aa74-1c2d9f1445d7"
  }, {
    "intent": "small_talk.nevermind",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "blockmycallerid_retrycnt",
        "value": null
      }, {
        "parameter": "iphone_vs_android",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "50dd1fab-21f4-4871-8a78-ee7557d3a759"
  }, {
    "condition": "$session.params.iphone_vs_android = \"iphone\" OR $session.params.iphone_vs_android = \"1\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "To block your Caller ID on an iPhone:\nGo into Settings and Click on Phone.\nThen, Click on Show My Caller ID and slide the button to the left to turn it off.\nIt should go from green to white." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Voici comment bloquer votre afficheur d'appel sortant sur un iPhone:\nAllez dans Réglages et cliquez sur Téléphone.\nPuis, cliquez sur Afficher mon numéro et faites glisser le bouton vers la gauche, il devrait passer du vert au blanc." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "blockmycallerid_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "3a0725c2-46da-47bb-be64-363f87617ba7"
  }, {
    "condition": "$session.params.iphone_vs_android = \"android\" OR $session.params.iphone_vs_android = \"2\"",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "To block Caller ID on an Android phone :\nOpen the phone app, and tap on the three dots to open the menu.\nThen, select Settings and click on More settings.\nAfter that, click on Show my Caller ID and select Hide number." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Voici comment bloquer votre afficheur d'appel sortant sur un Android:\nOuvrez l'application Téléphone sur votre téléphone Android et ouvrez le menu en appuyant sur les trois points à la fin de la barre de recherche.\nPuis, sélectionnez Paramètres et cliquez sur Plus de paramètres.\nAprès cela, cliquez sur Afficher mon numéro et sélectionnez Masquer le numéro." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "blockmycallerid_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "End Page",
    "name": "351066ba-bb80-4eb6-abb2-3cc88bf99067"
  }, {
    "condition": "$session.params.blockmycallerid_retrycnt = null",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "blockmycallerid_retrycnt",
        "value": 0
      } ]
    },
    "name": "e9400948-c1bf-4cc6-8bdc-a625871d1a0a"
  }, {
    "condition": "$session.params.blockmycallerid_retrycnt \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "blockmycallerid_retrycnt",
        "value": null
      } ]
    },
    "targetPage": "No Match 2",
    "name": "e9fdbd82-2dce-4820-bad7-835ca109dcf0"
  }, {
    "condition": "$session.params.iphone_vs_android = 0 OR $session.params.iphone_vs_android = 9",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "I'm Sorry, I didn’t understand that.", "Sorry, I didn't catch that.", "I didn't get that." ]
        },
        "languageCode": "en"
      }, {
        "text": {
          "text": [ "Désolé, je ne pense pas avoir compris.", "Désolé, je n'ai pas tout à fait compris.", "Je ne crois pas avoir bien saisi." ]
        },
        "languageCode": "fr-ca"
      } ],
      "setParameterActions": [ {
        "parameter": "iphone_vs_android",
        "value": null
      }, {
        "parameter": "blockmycallerid_retrycnt",
        "value": "$sys.func.ADD($session.params.blockmycallerid_retrycnt,1)"
      } ]
    },
    "targetPage": "Current Page",
    "name": "8f7cd82d-2602-42fb-a10c-7bec24b7f1c4"
  } ],
  "eventHandlers": [ {
    "targetPage": "Current Page",
    "event": "NO_INPUT",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "blockmycallerid_retrycnt",
        "value": "$sys.func.ADD($session.params.blockmycallerid_retrycnt,1)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$session.params.blockmycallerid_retrycnt = 0",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn't quite get that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je ne pense pas avoir compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        }, {
          "condition": "$session.params.blockmycallerid_retrycnt = 1",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Sorry, I didn’t understand that." ]
              },
              "languageCode": "en"
            }
          }, {
            "message": {
              "text": {
                "text": [ "Désolé, je n'ai pas tout à fait compris." ]
              },
              "languageCode": "fr-ca"
            }
          } ]
        } ]
      } ]
    },
    "name": "a0dbda36-4372-42b6-b609-d0bb299fb65b"
  } ]
}
